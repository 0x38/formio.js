!function t(e,r,n){function o(s,a){if(!r[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=r[s]={exports:{}};e[s][0].call(c.exports,function(t){var r=e[s][1][t];return o(r?r:t)},c,c.exports,t,e,r,n)}return r[s].exports}for(var i="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(t,e,r){!function(t){function n(){this._events={},this._conf&&o.call(this,this._conf)}function o(e){e?(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),this._events.maxListeners=e.maxListeners!==t?e.maxListeners:c,e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this.newListener=e.newListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),this.wildcard&&(this.listenerTree={})):this._events.maxListeners=c}function i(t,e){var r="(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.";this.verboseMemoryLeak?(r+=" Event name: %s.",console.error(r,t,e)):console.error(r,t),console.trace&&console.trace()}function s(t){this._events={},this.newListener=!1,this.verboseMemoryLeak=!1,o.call(this,t)}function a(t,e,r,n){if(!r)return[];var o,i,s,u,l,c,f,h=[],p=e.length,d=e[n],y=e[n+1];if(n===p&&r._listeners){if("function"==typeof r._listeners)return t&&t.push(r._listeners),[r];for(o=0,i=r._listeners.length;o<i;o++)t&&t.push(r._listeners[o]);return[r]}if("*"===d||"**"===d||r[d]){if("*"===d){for(s in r)"_listeners"!==s&&r.hasOwnProperty(s)&&(h=h.concat(a(t,e,r[s],n+1)));return h}if("**"===d){f=n+1===p||n+2===p&&"*"===y,f&&r._listeners&&(h=h.concat(a(t,e,r,p)));for(s in r)"_listeners"!==s&&r.hasOwnProperty(s)&&("*"===s||"**"===s?(r[s]._listeners&&!f&&(h=h.concat(a(t,e,r[s],p))),h=h.concat(a(t,e,r[s],n))):h=s===y?h.concat(a(t,e,r[s],n+2)):h.concat(a(t,e,r[s],n)));return h}h=h.concat(a(t,e,r[d],n+1))}if(u=r["*"],u&&a(t,e,u,n+1),l=r["**"])if(n<p){l._listeners&&a(t,e,l,p);for(s in l)"_listeners"!==s&&l.hasOwnProperty(s)&&(s===y?a(t,e,l[s],n+2):s===d?a(t,e,l[s],n+1):(c={},c[s]=l[s],a(t,e,{"**":c},n+1)))}else l._listeners?a(t,e,l,p):l["*"]&&l["*"]._listeners&&a(t,e,l["*"],p);return h}function u(e,r){e="string"==typeof e?e.split(this.delimiter):e.slice();for(var n=0,o=e.length;n+1<o;n++)if("**"===e[n]&&"**"===e[n+1])return;for(var s=this.listenerTree,a=e.shift();a!==t;){if(s[a]||(s[a]={}),s=s[a],0===e.length)return s._listeners?("function"==typeof s._listeners&&(s._listeners=[s._listeners]),s._listeners.push(r),!s._listeners.warned&&this._events.maxListeners>0&&s._listeners.length>this._events.maxListeners&&(s._listeners.warned=!0,i.call(this,s._listeners.length,a))):s._listeners=r,!0;a=e.shift()}return!0}var l=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},c=10;s.EventEmitter2=s,s.prototype.delimiter=".",s.prototype.setMaxListeners=function(e){e!==t&&(this._events||n.call(this),this._events.maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},s.prototype.event="",s.prototype.once=function(t,e){return this.many(t,1,e),this},s.prototype.many=function(t,e,r){function n(){0===--e&&o.off(t,n),r.apply(this,arguments)}var o=this;if("function"!=typeof r)throw new Error("many only accepts instances of Function");return n._origin=r,this.on(t,n),o},s.prototype.emit=function(){this._events||n.call(this);var t=arguments[0];if("newListener"===t&&!this.newListener&&!this._events.newListener)return!1;var e,r,o,i,s,u=arguments.length;if(this._all&&this._all.length){if(s=this._all.slice(),u>3)for(e=new Array(u),i=0;i<u;i++)e[i]=arguments[i];for(o=0,r=s.length;o<r;o++)switch(this.event=t,u){case 1:s[o].call(this,t);break;case 2:s[o].call(this,t,arguments[1]);break;case 3:s[o].call(this,t,arguments[1],arguments[2]);break;default:s[o].apply(this,e)}}if(this.wildcard){s=[];var l="string"==typeof t?t.split(this.delimiter):t.slice();a.call(this,s,l,this.listenerTree,0)}else{if(s=this._events[t],"function"==typeof s){switch(this.event=t,u){case 1:s.call(this);break;case 2:s.call(this,arguments[1]);break;case 3:s.call(this,arguments[1],arguments[2]);break;default:for(e=new Array(u-1),i=1;i<u;i++)e[i-1]=arguments[i];s.apply(this,e)}return!0}s&&(s=s.slice())}if(s&&s.length){if(u>3)for(e=new Array(u-1),i=1;i<u;i++)e[i-1]=arguments[i];for(o=0,r=s.length;o<r;o++)switch(this.event=t,u){case 1:s[o].call(this);break;case 2:s[o].call(this,arguments[1]);break;case 3:s[o].call(this,arguments[1],arguments[2]);break;default:s[o].apply(this,e)}return!0}if(!this._all&&"error"===t)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},s.prototype.emitAsync=function(){this._events||n.call(this);var t=arguments[0];if("newListener"===t&&!this.newListener&&!this._events.newListener)return Promise.resolve([!1]);var e,r,o,i,s,u=[],l=arguments.length;if(this._all){if(l>3)for(e=new Array(l),i=1;i<l;i++)e[i]=arguments[i];for(o=0,r=this._all.length;o<r;o++)switch(this.event=t,l){case 1:u.push(this._all[o].call(this,t));break;case 2:u.push(this._all[o].call(this,t,arguments[1]));break;case 3:u.push(this._all[o].call(this,t,arguments[1],arguments[2]));break;default:u.push(this._all[o].apply(this,e))}}if(this.wildcard){s=[];var c="string"==typeof t?t.split(this.delimiter):t.slice();a.call(this,s,c,this.listenerTree,0)}else s=this._events[t];if("function"==typeof s)switch(this.event=t,l){case 1:u.push(s.call(this));break;case 2:u.push(s.call(this,arguments[1]));break;case 3:u.push(s.call(this,arguments[1],arguments[2]));break;default:for(e=new Array(l-1),i=1;i<l;i++)e[i-1]=arguments[i];u.push(s.apply(this,e))}else if(s&&s.length){if(l>3)for(e=new Array(l-1),i=1;i<l;i++)e[i-1]=arguments[i];for(o=0,r=s.length;o<r;o++)switch(this.event=t,l){case 1:u.push(s[o].call(this));break;case 2:u.push(s[o].call(this,arguments[1]));break;case 3:u.push(s[o].call(this,arguments[1],arguments[2]));break;default:u.push(s[o].apply(this,e))}}else if(!this._all&&"error"===t)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(u)},s.prototype.on=function(t,e){if("function"==typeof t)return this.onAny(t),this;if("function"!=typeof e)throw new Error("on only accepts instances of Function");return this._events||n.call(this),this.emit("newListener",t,e),this.wildcard?(u.call(this,t,e),this):(this._events[t]?("function"==typeof this._events[t]&&(this._events[t]=[this._events[t]]),this._events[t].push(e),!this._events[t].warned&&this._events.maxListeners>0&&this._events[t].length>this._events.maxListeners&&(this._events[t].warned=!0,i.call(this,this._events[t].length,t))):this._events[t]=e,this)},s.prototype.onAny=function(t){if("function"!=typeof t)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),this._all.push(t),this},s.prototype.addListener=s.prototype.on,s.prototype.off=function(e,r){function n(e){if(e!==t){var r=Object.keys(e);for(var o in r){var i=r[o],s=e[i];s instanceof Function||"object"!=typeof s||null===s||(Object.keys(s).length>0&&n(e[i]),0===Object.keys(s).length&&delete e[i])}}}if("function"!=typeof r)throw new Error("removeListener only takes instances of Function");var o,i=[];if(this.wildcard){var s="string"==typeof e?e.split(this.delimiter):e.slice();i=a.call(this,null,s,this.listenerTree,0)}else{if(!this._events[e])return this;o=this._events[e],i.push({_listeners:o})}for(var u=0;u<i.length;u++){var c=i[u];if(o=c._listeners,l(o)){for(var f=-1,h=0,p=o.length;h<p;h++)if(o[h]===r||o[h].listener&&o[h].listener===r||o[h]._origin&&o[h]._origin===r){f=h;break}if(f<0)continue;return this.wildcard?c._listeners.splice(f,1):this._events[e].splice(f,1),0===o.length&&(this.wildcard?delete c._listeners:delete this._events[e]),this.emit("removeListener",e,r),this}(o===r||o.listener&&o.listener===r||o._origin&&o._origin===r)&&(this.wildcard?delete c._listeners:delete this._events[e],this.emit("removeListener",e,r))}return n(this.listenerTree),this},s.prototype.offAny=function(t){var e,r=0,n=0;if(t&&this._all&&this._all.length>0){for(e=this._all,r=0,n=e.length;r<n;r++)if(t===e[r])return e.splice(r,1),this.emit("removeListenerAny",t),this}else{for(e=this._all,r=0,n=e.length;r<n;r++)this.emit("removeListenerAny",e[r]);this._all=[]}return this},s.prototype.removeListener=s.prototype.off,s.prototype.removeAllListeners=function(t){if(0===arguments.length)return!this._events||n.call(this),this;if(this.wildcard)for(var e="string"==typeof t?t.split(this.delimiter):t.slice(),r=a.call(this,null,e,this.listenerTree,0),o=0;o<r.length;o++){var i=r[o];i._listeners=null}else this._events&&(this._events[t]=null);return this},s.prototype.listeners=function(t){if(this.wildcard){var e=[],r="string"==typeof t?t.split(this.delimiter):t.slice();return a.call(this,e,r,this.listenerTree,0),e}return this._events||n.call(this),this._events[t]||(this._events[t]=[]),l(this._events[t])||(this._events[t]=[this._events[t]]),this._events[t]},s.prototype.listenerCount=function(t){return this.listeners(t).length},s.prototype.listenersAny=function(){return this._all?this._all:[]},"function"==typeof define&&define.amd?define(function(){return s}):"object"==typeof r?e.exports=s:window.EventEmitter2=s}()},{}],2:[function(t,e,r){(function(t){!function(t,r,n){r[t]=r[t]||n(),"undefined"!=typeof e&&e.exports?e.exports=r[t]:"function"==typeof define&&define.amd&&define(function(){return r[t]})}("Promise","undefined"!=typeof t?t:this,function(){"use strict";function t(t,e){h.add(t,e),f||(f=d(h.drain))}function e(t){var e,r=typeof t;return null==t||"object"!=r&&"function"!=r||(e=t.then),"function"==typeof e&&e}function r(){for(var t=0;t<this.chain.length;t++)n(this,1===this.state?this.chain[t].success:this.chain[t].failure,this.chain[t]);this.chain.length=0}function n(t,r,n){var o,i;try{r===!1?n.reject(t.msg):(o=r===!0?t.msg:r.call(void 0,t.msg),o===n.promise?n.reject(TypeError("Promise-chain cycle")):(i=e(o))?i.call(o,n.resolve,n.reject):n.resolve(o))}catch(s){n.reject(s)}}function o(n){var s,u=this;if(!u.triggered){u.triggered=!0,u.def&&(u=u.def);try{(s=e(n))?t(function(){var t=new a(u);try{s.call(n,function(){o.apply(t,arguments)},function(){i.apply(t,arguments)})}catch(e){i.call(t,e)}}):(u.msg=n,u.state=1,u.chain.length>0&&t(r,u))}catch(l){i.call(new a(u),l)}}}function i(e){var n=this;n.triggered||(n.triggered=!0,n.def&&(n=n.def),n.msg=e,n.state=2,n.chain.length>0&&t(r,n))}function s(t,e,r,n){for(var o=0;o<e.length;o++)!function(o){t.resolve(e[o]).then(function(t){r(o,t)},n)}(o)}function a(t){this.def=t,this.triggered=!1}function u(t){this.promise=t,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function l(e){if("function"!=typeof e)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var n=new u(this);this.then=function(e,o){var i={success:"function"!=typeof e||e,failure:"function"==typeof o&&o};return i.promise=new this.constructor(function(t,e){if("function"!=typeof t||"function"!=typeof e)throw TypeError("Not a function");i.resolve=t,i.reject=e}),n.chain.push(i),0!==n.state&&t(r,n),i.promise},this["catch"]=function(t){return this.then(void 0,t)};try{e.call(void 0,function(t){o.call(n,t)},function(t){i.call(n,t)})}catch(s){i.call(n,s)}}var c,f,h,p=Object.prototype.toString,d="undefined"!=typeof setImmediate?function(t){return setImmediate(t)}:setTimeout;try{Object.defineProperty({},"x",{}),c=function(t,e,r,n){return Object.defineProperty(t,e,{value:r,writable:!0,configurable:n!==!1})}}catch(y){c=function(t,e,r){return t[e]=r,t}}h=function(){function t(t,e){this.fn=t,this.self=e,this.next=void 0}var e,r,n;return{add:function(o,i){n=new t(o,i),r?r.next=n:e=n,r=n,n=void 0},drain:function(){var t=e;for(e=r=f=void 0;t;)t.fn.call(t.self),t=t.next}}}();var m=c({},"constructor",l,!1);return l.prototype=m,c(m,"__NPO__",0,!1),c(l,"resolve",function(t){var e=this;return t&&"object"==typeof t&&1===t.__NPO__?t:new e(function(e,r){if("function"!=typeof e||"function"!=typeof r)throw TypeError("Not a function");e(t)})}),c(l,"reject",function(t){return new this(function(e,r){if("function"!=typeof e||"function"!=typeof r)throw TypeError("Not a function");r(t)})}),c(l,"all",function(t){var e=this;return"[object Array]"!=p.call(t)?e.reject(TypeError("Not an array")):0===t.length?e.resolve([]):new e(function(r,n){if("function"!=typeof r||"function"!=typeof n)throw TypeError("Not a function");var o=t.length,i=Array(o),a=0;s(e,t,function(t,e){i[t]=e,++a===o&&r(i)},n)})}),c(l,"race",function(t){var e=this;return"[object Array]"!=p.call(t)?e.reject(TypeError("Not an array")):new e(function(r,n){if("function"!=typeof r||"function"!=typeof n)throw TypeError("Not a function");s(e,t,function(t,e){r(e)},n)})}),l})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(t,e,r){e.exports=function(t){if(!t||"object"!=typeof t)return t;var e;if(o(t)){var r=t.length;e=Array(r);for(var i=0;i<r;i++)e[i]=t[i]}else{var s=n(t);e={};for(var i=0,a=s.length;i<a;i++){var u=s[i];e[u]=t[u]}}return e};var n=Object.keys||function(t){var e=[];for(var r in t)({}).hasOwnProperty.call(t,r)&&e.push(r);return e},o=Array.isArray||function(t){return"[object Array]"==={}.toString.call(t)}},{}],4:[function(t,e,r){!function(t){"use strict";function e(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function r(t){return"string"!=typeof t&&(t=String(t)),t}function n(t){this.map={},t instanceof n?t.forEach(function(t,e){this.append(e,t)},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function o(t){return t.bodyUsed?Promise.reject(new TypeError("Already read")):void(t.bodyUsed=!0)}function i(t){return new Promise(function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}})}function s(t){var e=new FileReader;return e.readAsArrayBuffer(t),i(e)}function a(t){var e=new FileReader;return e.readAsText(t),i(e)}function u(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,"string"==typeof t)this._bodyText=t;else if(d.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(d.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(t){if(!d.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t))throw new Error("unsupported BodyInit type")}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type&&this.headers.set("content-type",this._bodyBlob.type))},d.blob?(this.blob=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(s)},this.text=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return a(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var t=o(this);return t?t:Promise.resolve(this._bodyText)},d.formData&&(this.formData=function(){return this.text().then(f)}),this.json=function(){return this.text().then(JSON.parse)},this}function l(t){var e=t.toUpperCase();return y.indexOf(e)>-1?e:t}function c(t,e){e=e||{};var r=e.body;if(c.prototype.isPrototypeOf(t)){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new n(t.headers)),this.method=t.method,this.mode=t.mode,r||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=t;if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new n(e.headers)),this.method=l(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function f(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(o))}}),e}function h(t){var e=new n,r=(t.getAllResponseHeaders()||"").trim().split("\n");return r.forEach(function(t){var r=t.trim().split(":"),n=r.shift().trim(),o=r.join(":").trim();e.append(n,o)}),e}function p(t,e){e||(e={}),this.type="default",this.status=e.status,this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText,this.headers=e.headers instanceof n?e.headers:new n(e.headers),this.url=e.url||"",this._initBody(t)}if(!t.fetch){n.prototype.append=function(t,n){t=e(t),n=r(n);var o=this.map[t];o||(o=[],this.map[t]=o),o.push(n)},n.prototype["delete"]=function(t){delete this.map[e(t)]},n.prototype.get=function(t){var r=this.map[e(t)];return r?r[0]:null},n.prototype.getAll=function(t){return this.map[e(t)]||[]},n.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},n.prototype.set=function(t,n){this.map[e(t)]=[r(n)]},n.prototype.forEach=function(t,e){Object.getOwnPropertyNames(this.map).forEach(function(r){this.map[r].forEach(function(n){t.call(e,n,r,this)},this)},this)};var d={blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t},y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];c.prototype.clone=function(){return new c(this)},u.call(c.prototype),u.call(p.prototype),p.prototype.clone=function(){return new p(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new n(this.headers),url:this.url})},p.error=function(){var t=new p(null,{status:0,statusText:""});return t.type="error",t};var m=[301,302,303,307,308];p.redirect=function(t,e){if(m.indexOf(e)===-1)throw new RangeError("Invalid status code");return new p(null,{status:e,headers:{location:t}})},t.Headers=n,t.Request=c,t.Response=p,t.fetch=function(t,e){return new Promise(function(r,n){function o(){return"responseURL"in s?s.responseURL:/^X-Request-URL:/m.test(s.getAllResponseHeaders())?s.getResponseHeader("X-Request-URL"):void 0}var i;i=c.prototype.isPrototypeOf(t)&&!e?t:new c(t,e);var s=new XMLHttpRequest;s.onload=function(){var t=1223===s.status?204:s.status;if(t<100||t>599)return void n(new TypeError("Network request failed"));var e={status:t,statusText:s.statusText,headers:h(s),url:o()},i="response"in s?s.response:s.responseText;r(new p(i,e))},s.onerror=function(){n(new TypeError("Network request failed"))},s.ontimeout=function(){n(new TypeError("Network request failed"))},s.open(i.method,i.url,!0),"include"===i.credentials&&(s.withCredentials=!0),"responseType"in s&&d.blob&&(s.responseType="blob"),i.headers.forEach(function(t,e){s.setRequestHeader(e,t)}),s.send("undefined"==typeof i._bodyInit?null:i._bodyInit)})},t.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},{}],5:[function(t,e,r){(function(r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=t("native-promise-only");t("whatwg-fetch");var i=t("eventemitter2").EventEmitter2,s=t("shallow-copy"),a=t("./providers"),u="https://api.form.io",l=u,c=!1,f=[],h={},p=function(){},d=function(t){return t},y=function(t){var e=[].slice.call(arguments,1);return o.all(f.map(function(r){return(r[t]||p).apply(r,e)}))},m=function(t){var e=[].slice.call(arguments,0),r=function n(t,r){var i=f[t];return i?o.resolve((i&&i[r]||p).apply(i,[].slice.call(arguments,2))).then(function(r){return null!==r&&void 0!==r?r:n.apply(null,[t+1].concat(e))}):o.resolve(null)};return r.apply(null,[0].concat(e))},v=function(t,e){var r=[].slice.call(arguments,2);return f.reduce(function(e,n){return(n[t]||d).apply(n,[e].concat(r))},e)},g=function(t){var e="^(http[s]?:\\/\\/)";return e+=u&&0===t.indexOf(u)?"("+u.replace(/^http[s]?:\/\//,"")+")":"([^/]+)",e+="($|\\/.*)",t.match(new RegExp(e))},w=function(t){var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return e.join("&")},b=function T(t){if(!(this instanceof T))return new T(t);if(!t)return this.projectUrl=u+"/project",this.projectsUrl=u+"/project",this.projectId=!1,void(this.query="");this.projectsUrl="",this.projectUrl="",this.projectId="",this.formUrl="",this.formsUrl="",this.formId="",this.submissionsUrl="",this.submissionUrl="",this.submissionId="",this.actionsUrl="",this.actionId="",this.actionUrl="",this.query="",0!==t.indexOf("http")&&0!==t.indexOf("//")&&(u=u?u:window.location.href.match(/http[s]?:\/\/api./)[0],t=u+t);var e=g(t),r=[],n=e[1]+e[2];t=e.length>3?e[3]:"";var o=t.split("?");if(o.length>1&&(t=o[0],this.query="?"+o[1]),t.search(/(^|\/)(form|project)($|\/)/)!==-1){var i=function(e,n){this[e+"sUrl"]=n+"/"+e;var o=new RegExp("/"+e+"/([^/]+)");return t.search(o)!==-1&&(r=t.match(o),this[e+"Url"]=r?n+r[0]:"",this[e+"Id"]=r.length>1?r[1]:"",n+=r[0]),n}.bind(this),s=function y(t,e,r){for(var n in t)if(t.hasOwnProperty(n)){var o=t[n];if(o instanceof Array)y(o,e,!0);else{var s=i(o,e);e=r?e:s}}};s(["project","form",["submission","action"]],n),this.projectId||e.length>2&&e[2].split(".").length>2&&(this.projectUrl=n,this.projectId=e[2].split(".")[0])}else{this.projectUrl=n,this.projectId=e.length>2?e[2].split(".")[0]:"";var a=new RegExp("/(submission|action)($|/.*)"),f=t.match(a);this.pathType=f&&f.length>1?f[1]:"",t=t.replace(a,""),t=t.replace(/\/$/,""),this.formsUrl=n+"/form",this.formUrl=n+t,this.formId=t.replace(/^\/+|\/+$/g,"");var h=["submission","action"];for(var p in h)if(h.hasOwnProperty(p)){var d=h[p];this[d+"sUrl"]=n+t+"/"+d,this.pathType===d&&f.length>2&&f[2]&&(this[d+"Id"]=f[2].replace(/^\/+|\/+$/g,""),this[d+"Url"]=n+t+f[0])}}c||(l=this.projectUrl)},_=function(t){var e=t+"Id",r=t+"Url";return function(i,s){return i&&"object"===("undefined"==typeof i?"undefined":n(i))&&(i=w(i.params)),i=i?this.query?this.query+"&"+i:"?"+i:this.query,this[e]?this.makeRequest(t,this[r]+i,"get",null,s):o.reject("Missing "+e)}},k=function(t){var e=t+"Id",r=t+"Url";return function(n,o){var i=this[e]||n._id?"put":"post",s=this[e]?this[r]:this[t+"sUrl"];return!this[e]&&n._id&&"put"===i&&(s+="/"+n._id),h={},this.makeRequest(t,s+this.query,i,n,o)}},j=function(t){var e=t+"Id",r=t+"Url";return function(n){return this[e]||o.reject("Nothing to delete"),h={},this.makeRequest(t,this[r],"delete",null,n)}},U=function(t){var e=t+"Url";return function(r,o){return r=r||"",r&&"object"===("undefined"==typeof r?"undefined":n(r))&&(r="?"+w(r.params)),this.makeRequest(t,this[e]+r,"get",null,o)}};b.prototype.makeRequest=function(t,e,r,o,i){var s=this;r=(r||"GET").toUpperCase(),i&&"object"===("undefined"==typeof i?"undefined":n(i))||(i={});var a={formio:s,type:t,url:e,method:r,data:o,opts:i},u=y("preRequest",a).then(function(){return m("request",a).then(function(t){return null===t||void 0===t?b.request(e,r,o,i.header,i):t})});return v("wrapRequestPromise",u,a)},b.prototype.loadProject=_("project"),b.prototype.saveProject=k("project"),b.prototype.deleteProject=j("project"),b.prototype.loadForm=_("form"),b.prototype.saveForm=k("form"),b.prototype.deleteForm=j("form"),b.prototype.loadForms=U("forms"),b.prototype.loadSubmission=_("submission"),b.prototype.saveSubmission=k("submission"),b.prototype.deleteSubmission=j("submission"),b.prototype.loadSubmissions=U("submissions"),b.prototype.loadAction=_("action"),b.prototype.saveAction=k("action"),b.prototype.deleteAction=j("action"),b.prototype.loadActions=U("actions"),b.prototype.availableActions=function(){return this.makeRequest("availableActions",this.formUrl+"/actions")},b.prototype.actionInfo=function(t){return this.makeRequest("actionInfo",this.formUrl+"/actions/"+t)},b.prototype.uploadFile=function(t,e,r,n,o,i){var s={provider:t,method:"upload",file:e,fileName:r,dir:n},u=y("preRequest",s).then(function(){return m("fileRequest",s).then(function(s){if(t&&(null===s||void 0===s)){if(a.storage.hasOwnProperty(t)){var u=new a.storage[t](this);return u.uploadFile(e,r,n,o,i)}throw"Storage provider not found"}return s||{url:""}}.bind(this))}.bind(this));return v("wrapFileRequestPromise",u,s)},b.prototype.downloadFile=function(t){var e={method:"download",file:t},r=y("preRequest",e).then(function(){return m("fileRequest",e).then(function(e){if(t.storage&&(null===e||void 0===e)){if(a.storage.hasOwnProperty(t.storage)){var r=new a.storage[t.storage](this);return r.downloadFile(t)}throw"Storage provider not found"}return e||{url:""}}.bind(this))}.bind(this));return v("wrapFileRequestPromise",r,e)},b.makeStaticRequest=function(t,e,r,o){e=(e||"GET").toUpperCase(),o&&"object"===("undefined"==typeof o?"undefined":n(o))||(o={});var i={url:t,method:e,data:r},s=y("preRequest",i).then(function(){return m("staticRequest",i).then(function(n){return null===n||void 0===n?b.request(t,e,r,o.header,o):n})});return v("wrapStaticRequestPromise",s,i)},b.loadProjects=function(t){return t=t||"","object"===("undefined"==typeof t?"undefined":n(t))&&(t="?"+w(t.params)),this.makeStaticRequest(u+"/project"+t)},b.request=function(t,e,r,i,a){if(!t)return o.reject("No url provided");e=(e||"GET").toUpperCase(),"boolean"==typeof a&&(a={ignoreCache:a}),a&&"object"===("undefined"==typeof a?"undefined":n(a))||(a={});var u=btoa(t);return new o(function(s,l){return!a.ignoreCache&&"GET"===e&&h.hasOwnProperty(u)?s(h[u]):void s(new o(function(n,o){var s=i||new Headers({Accept:"application/json","Content-type":"application/json; charset=UTF-8"}),a=b.getToken();a&&s.append("x-jwt-token",a);var u={method:e,headers:s,mode:"cors"};r&&(u.body=JSON.stringify(r)),n(fetch(t,u))})["catch"](function(t){throw t.message="Could not connect to API server ("+t.message+")",t.networkError=!0,t}).then(function(t){if(!t.ok)return 440===t.status?(b.setToken(null),b.events.emit("formio.sessionExpired",t.body)):401===t.status&&b.events.emit("formio.unauthorized",t.body),(t.headers.get("content-type").indexOf("application/json")!==-1?t.json():t.text()).then(function(t){throw t});var e=t.headers.get("x-jwt-token");return t.status>=200&&t.status<300&&e&&""!==e&&b.setToken(e),204===t.status?{}:(t.headers.get("content-type").indexOf("application/json")!==-1?t.json():t.text()).then(function(e){var r=t.headers.get("content-range");if(r&&"object"===("undefined"==typeof e?"undefined":n(e))){if(r=r.split("/"),"*"!==r[0]){var i=r[0].split("-");e.skip=Number(i[0]),e.limit=i[1]-i[0]+1}e.serverCount="*"===r[1]?r[1]:Number(r[1])}if(!a.getHeaders)return e;var s={};return t.headers.forEach(function(t,e){s[e]=t}),new o(function(t,r){t({result:e,headers:s})})})})["catch"](function(t){throw"Bad Token"===t&&(b.setToken(null),b.events.emit("formio.badToken",t)),delete h[u],t}))}).then(function(t){if("GET"===e&&(h[u]=o.resolve(t)),Array.isArray(t)){var r=t.map(s);return r.skip=t.skip,r.limit=t.limit,r.serverCount=t.serverCount,r}return s(t)})},b.setToken=function(t){if(t=t||"",t!==this.token){if(this.token=t,!t){b.setUser(null);try{return localStorage.removeItem("formioToken")}catch(e){return}}try{localStorage.setItem("formioToken",t)}catch(e){}return b.currentUser()}},b.getToken=function(){if(this.token)return this.token;try{var t=localStorage.getItem("formioToken")||"";return this.token=t,t}catch(e){return""}},b.setUser=function(t){if(!t){this.setToken(null);try{return localStorage.removeItem("formioUser")}catch(e){return}}try{localStorage.setItem("formioUser",JSON.stringify(t))}catch(e){}},b.getUser=function(){try{return JSON.parse(localStorage.getItem("formioUser")||null)}catch(t){return}},b.setBaseUrl=function(t){u=t,c||(l=t)},b.getBaseUrl=function(){return u},b.setAppUrl=function(t){l=t,c=!0},b.getAppUrl=function(){return l},b.clearCache=function(){h={}},b.form=function(t,e,r){if(r||"function"!=typeof e||(r=e,e={}),r=r||function(){console.log(arguments)},e=e||{},t.jquery&&(t=t[0]),!t)return r("Invalid Form");var n=function(){return e.form||t.getAttribute("action")},o=function(){for(var e={data:{}},r=function(t,r){var n="[]"===t.substr(-2);n&&(t=t.replace("[]",""));for(var o=t.replace(/\[|\]\[/g,".").replace(/\]$/g,"").split("."),i=e;t=o.shift();)o.length?(i[t]||(i[t]={}),i=i[t]):n?(i[t]||(i[t]=[]),i[t].push(r)):i[t]=r},n=new FormData(t),o=n.entries(),i=null;i=o.next().value;)r(i[0],i[1]);return e},i=function(t){t&&t.preventDefault();var e=n();e&&new b(e).saveSubmission(o()).then(function(t){r(null,t)},r)};return t.attachEvent?t.attachEvent("submit",i):t.addEventListener("submit",i),{submit:i,getAction:n,getSubmission:o}},b.currentUser=function(){var t=u+"/current",e=this.getUser();if(e)return v("wrapStaticRequestPromise",o.resolve(e),{url:t,method:"GET"});var r=this.getToken();return r?this.makeStaticRequest(t).then(function(t){return b.setUser(t),t}):v("wrapStaticRequestPromise",o.resolve(null),{url:t,method:"GET"})},b.logout=function(){var t=function(t){return this.setToken(null),this.setUser(null),b.clearCache(),t}.bind(this);return this.makeStaticRequest(u+"/logout").then(t)["catch"](t)},b.fieldData=function(t,e){if(!t)return"";if(!e||!e.key)return t;if(e.key.indexOf(".")!==-1){for(var r=t,n=e.key.split("."),o="",i=0;i<n.length;i++){if(o=n[i],r.hasOwnProperty("_id")&&(r=r.data),!r.hasOwnProperty(o))return;o===n[n.length-1]&&e.multiple&&!Array.isArray(r[o])&&(r[o]=[r[o]]),r=r[o]}return r}return e.multiple&&!Array.isArray(t[e.key])&&(t[e.key]=[t[e.key]]),t[e.key]},b.providers=a,b.events=new i({wildcard:!1,maxListeners:0}),b.registerPlugin=function(t,e){f.push(t),f.sort(function(t,e){return(e.priority||0)-(t.priority||0)}),t.__name=e,(t.init||p).call(t,b)},b.getPlugin=function(t){return f.reduce(function(e,r){return e?e:r.__name===t?r:void 0},null)},b.deregisterPlugin=function(t){var e=f.length;return f=f.filter(function(e){return e!==t&&e.__name!==t||((e.deregister||p).call(e,b),!1)}),e!==f.length},e.exports=r.Formio=b}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./providers":7,eventemitter2:1,"native-promise-only":2,"shallow-copy":3,"whatwg-fetch":4}],6:[function(t,e,r){(function(r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=t("native-promise-only");t("whatwg-fetch");var i=t("eventemitter2").EventEmitter2,s=t("shallow-copy"),a=t("./providers"),u="https://api.form.io",l=u,c=!1,f=[],h={},p=function(){},d=function(t){return t},y=function(t){var e=[].slice.call(arguments,1);return o.all(f.map(function(r){return(r[t]||p).apply(r,e)}))},m=function(t){var e=[].slice.call(arguments,0),r=function n(t,r){var i=f[t];return i?o.resolve((i&&i[r]||p).apply(i,[].slice.call(arguments,2))).then(function(r){return null!==r&&void 0!==r?r:n.apply(null,[t+1].concat(e))}):o.resolve(null)};return r.apply(null,[0].concat(e))},v=function(t,e){var r=[].slice.call(arguments,2);return f.reduce(function(e,n){return(n[t]||d).apply(n,[e].concat(r))},e)},g=function(t){var e="^(http[s]?:\\/\\/)";return e+=u&&0===t.indexOf(u)?"("+u.replace(/^http[s]?:\/\//,"")+")":"([^/]+)",e+="($|\\/.*)",t.match(new RegExp(e))},w=function(t){var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return e.join("&")},b=function T(t){if(!(this instanceof T))return new T(t);if(!t)return this.projectUrl=u+"/project",this.projectsUrl=u+"/project",this.projectId=!1,void(this.query="");this.projectsUrl="",this.projectUrl="",this.projectId="",this.formUrl="",this.formsUrl="",this.formId="",this.submissionsUrl="",this.submissionUrl="",this.submissionId="",this.actionsUrl="",this.actionId="",this.actionUrl="",this.query="",
0!==t.indexOf("http")&&0!==t.indexOf("//")&&(u=u?u:window.location.href.match(/http[s]?:\/\/api./)[0],t=u+t);var e=g(t),r=[],n=e[1]+e[2];t=e.length>3?e[3]:"";var o=t.split("?");if(o.length>1&&(t=o[0],this.query="?"+o[1]),t.search(/(^|\/)(form|project)($|\/)/)!==-1){var i=function(e,n){this[e+"sUrl"]=n+"/"+e;var o=new RegExp("/"+e+"/([^/]+)");return t.search(o)!==-1&&(r=t.match(o),this[e+"Url"]=r?n+r[0]:"",this[e+"Id"]=r.length>1?r[1]:"",n+=r[0]),n}.bind(this),s=function y(t,e,r){for(var n in t)if(t.hasOwnProperty(n)){var o=t[n];if(o instanceof Array)y(o,e,!0);else{var s=i(o,e);e=r?e:s}}};s(["project","form",["submission","action"]],n),this.projectId||e.length>2&&e[2].split(".").length>2&&(this.projectUrl=n,this.projectId=e[2].split(".")[0])}else{this.projectUrl=n,this.projectId=e.length>2?e[2].split(".")[0]:"";var a=new RegExp("/(submission|action)($|/.*)"),f=t.match(a);this.pathType=f&&f.length>1?f[1]:"",t=t.replace(a,""),t=t.replace(/\/$/,""),this.formsUrl=n+"/form",this.formUrl=n+t,this.formId=t.replace(/^\/+|\/+$/g,"");var h=["submission","action"];for(var p in h)if(h.hasOwnProperty(p)){var d=h[p];this[d+"sUrl"]=n+t+"/"+d,this.pathType===d&&f.length>2&&f[2]&&(this[d+"Id"]=f[2].replace(/^\/+|\/+$/g,""),this[d+"Url"]=n+t+f[0])}}c||(l=this.projectUrl)},_=function(t){var e=t+"Id",r=t+"Url";return function(i,s){return i&&"object"===("undefined"==typeof i?"undefined":n(i))&&(i=w(i.params)),i=i?this.query?this.query+"&"+i:"?"+i:this.query,this[e]?this.makeRequest(t,this[r]+i,"get",null,s):o.reject("Missing "+e)}},k=function(t){var e=t+"Id",r=t+"Url";return function(n,o){var i=this[e]||n._id?"put":"post",s=this[e]?this[r]:this[t+"sUrl"];return!this[e]&&n._id&&"put"===i&&(s+="/"+n._id),h={},this.makeRequest(t,s+this.query,i,n,o)}},j=function(t){var e=t+"Id",r=t+"Url";return function(n){return this[e]||o.reject("Nothing to delete"),h={},this.makeRequest(t,this[r],"delete",null,n)}},U=function(t){var e=t+"Url";return function(r,o){return r=r||"",r&&"object"===("undefined"==typeof r?"undefined":n(r))&&(r="?"+w(r.params)),this.makeRequest(t,this[e]+r,"get",null,o)}};b.prototype.makeRequest=function(t,e,r,o,i){var s=this;r=(r||"GET").toUpperCase(),i&&"object"===("undefined"==typeof i?"undefined":n(i))||(i={});var a={formio:s,type:t,url:e,method:r,data:o,opts:i},u=y("preRequest",a).then(function(){return m("request",a).then(function(t){return null===t||void 0===t?b.request(e,r,o,i.header,i):t})});return v("wrapRequestPromise",u,a)},b.prototype.loadProject=_("project"),b.prototype.saveProject=k("project"),b.prototype.deleteProject=j("project"),b.prototype.loadForm=_("form"),b.prototype.saveForm=k("form"),b.prototype.deleteForm=j("form"),b.prototype.loadForms=U("forms"),b.prototype.loadSubmission=_("submission"),b.prototype.saveSubmission=k("submission"),b.prototype.deleteSubmission=j("submission"),b.prototype.loadSubmissions=U("submissions"),b.prototype.loadAction=_("action"),b.prototype.saveAction=k("action"),b.prototype.deleteAction=j("action"),b.prototype.loadActions=U("actions"),b.prototype.availableActions=function(){return this.makeRequest("availableActions",this.formUrl+"/actions")},b.prototype.actionInfo=function(t){return this.makeRequest("actionInfo",this.formUrl+"/actions/"+t)},b.prototype.uploadFile=function(t,e,r,n,o,i){var s={provider:t,method:"upload",file:e,fileName:r,dir:n},u=y("preRequest",s).then(function(){return m("fileRequest",s).then(function(s){if(t&&(null===s||void 0===s)){if(a.storage.hasOwnProperty(t)){var u=new a.storage[t](this);return u.uploadFile(e,r,n,o,i)}throw"Storage provider not found"}return s||{url:""}}.bind(this))}.bind(this));return v("wrapFileRequestPromise",u,s)},b.prototype.downloadFile=function(t){var e={method:"download",file:t},r=y("preRequest",e).then(function(){return m("fileRequest",e).then(function(e){if(t.storage&&(null===e||void 0===e)){if(a.storage.hasOwnProperty(t.storage)){var r=new a.storage[t.storage](this);return r.downloadFile(t)}throw"Storage provider not found"}return e||{url:""}}.bind(this))}.bind(this));return v("wrapFileRequestPromise",r,e)},b.makeStaticRequest=function(t,e,r,o){e=(e||"GET").toUpperCase(),o&&"object"===("undefined"==typeof o?"undefined":n(o))||(o={});var i={url:t,method:e,data:r},s=y("preRequest",i).then(function(){return m("staticRequest",i).then(function(n){return null===n||void 0===n?b.request(t,e,r,o.header,o):n})});return v("wrapStaticRequestPromise",s,i)},b.loadProjects=function(t){return t=t||"","object"===("undefined"==typeof t?"undefined":n(t))&&(t="?"+w(t.params)),this.makeStaticRequest(u+"/project"+t)},b.request=function(t,e,r,i,a){if(!t)return o.reject("No url provided");e=(e||"GET").toUpperCase(),"boolean"==typeof a&&(a={ignoreCache:a}),a&&"object"===("undefined"==typeof a?"undefined":n(a))||(a={});var u=btoa(t);return new o(function(s,l){return!a.ignoreCache&&"GET"===e&&h.hasOwnProperty(u)?s(h[u]):void s(new o(function(n,o){var s=i||new Headers({Accept:"application/json","Content-type":"application/json; charset=UTF-8"}),a=b.getToken();a&&s.append("x-jwt-token",a);var u={method:e,headers:s,mode:"cors"};r&&(u.body=JSON.stringify(r)),n(fetch(t,u))})["catch"](function(t){throw t.message="Could not connect to API server ("+t.message+")",t.networkError=!0,t}).then(function(t){if(!t.ok)return 440===t.status?(b.setToken(null),b.events.emit("formio.sessionExpired",t.body)):401===t.status&&b.events.emit("formio.unauthorized",t.body),(t.headers.get("content-type").indexOf("application/json")!==-1?t.json():t.text()).then(function(t){throw t});var e=t.headers.get("x-jwt-token");return t.status>=200&&t.status<300&&e&&""!==e&&b.setToken(e),204===t.status?{}:(t.headers.get("content-type").indexOf("application/json")!==-1?t.json():t.text()).then(function(e){var r=t.headers.get("content-range");if(r&&"object"===("undefined"==typeof e?"undefined":n(e))){if(r=r.split("/"),"*"!==r[0]){var i=r[0].split("-");e.skip=Number(i[0]),e.limit=i[1]-i[0]+1}e.serverCount="*"===r[1]?r[1]:Number(r[1])}if(!a.getHeaders)return e;var s={};return t.headers.forEach(function(t,e){s[e]=t}),new o(function(t,r){t({result:e,headers:s})})})})["catch"](function(t){throw"Bad Token"===t&&(b.setToken(null),b.events.emit("formio.badToken",t)),delete h[u],t}))}).then(function(t){if("GET"===e&&(h[u]=o.resolve(t)),Array.isArray(t)){var r=t.map(s);return r.skip=t.skip,r.limit=t.limit,r.serverCount=t.serverCount,r}return s(t)})},b.setToken=function(t){if(t=t||"",t!==this.token){if(this.token=t,!t){b.setUser(null);try{return localStorage.removeItem("formioToken")}catch(e){return}}try{localStorage.setItem("formioToken",t)}catch(e){}return b.currentUser()}},b.getToken=function(){if(this.token)return this.token;try{var t=localStorage.getItem("formioToken")||"";return this.token=t,t}catch(e){return""}},b.setUser=function(t){if(!t){this.setToken(null);try{return localStorage.removeItem("formioUser")}catch(e){return}}try{localStorage.setItem("formioUser",JSON.stringify(t))}catch(e){}},b.getUser=function(){try{return JSON.parse(localStorage.getItem("formioUser")||null)}catch(t){return}},b.setBaseUrl=function(t){u=t,c||(l=t)},b.getBaseUrl=function(){return u},b.setAppUrl=function(t){l=t,c=!0},b.getAppUrl=function(){return l},b.clearCache=function(){h={}},b.form=function(t,e,r){if(r||"function"!=typeof e||(r=e,e={}),r=r||function(){console.log(arguments)},e=e||{},t.jquery&&(t=t[0]),!t)return r("Invalid Form");var n=function(){return e.form||t.getAttribute("action")},o=function(){for(var e={data:{}},r=function(t,r){var n="[]"===t.substr(-2);n&&(t=t.replace("[]",""));for(var o=t.replace(/\[|\]\[/g,".").replace(/\]$/g,"").split("."),i=e;t=o.shift();)o.length?(i[t]||(i[t]={}),i=i[t]):n?(i[t]||(i[t]=[]),i[t].push(r)):i[t]=r},n=new FormData(t),o=n.entries(),i=null;i=o.next().value;)r(i[0],i[1]);return e},i=function(t){t&&t.preventDefault();var e=n();e&&new b(e).saveSubmission(o()).then(function(t){r(null,t)},r)};return t.attachEvent?t.attachEvent("submit",i):t.addEventListener("submit",i),{submit:i,getAction:n,getSubmission:o}},b.currentUser=function(){var t=u+"/current",e=this.getUser();if(e)return v("wrapStaticRequestPromise",o.resolve(e),{url:t,method:"GET"});var r=this.getToken();return r?this.makeStaticRequest(t).then(function(t){return b.setUser(t),t}):v("wrapStaticRequestPromise",o.resolve(null),{url:t,method:"GET"})},b.logout=function(){var t=function(t){return this.setToken(null),this.setUser(null),b.clearCache(),t}.bind(this);return this.makeStaticRequest(u+"/logout").then(t)["catch"](t)},b.fieldData=function(t,e){if(!t)return"";if(!e||!e.key)return t;if(e.key.indexOf(".")!==-1){for(var r=t,n=e.key.split("."),o="",i=0;i<n.length;i++){if(o=n[i],r.hasOwnProperty("_id")&&(r=r.data),!r.hasOwnProperty(o))return;o===n[n.length-1]&&e.multiple&&!Array.isArray(r[o])&&(r[o]=[r[o]]),r=r[o]}return r}return e.multiple&&!Array.isArray(t[e.key])&&(t[e.key]=[t[e.key]]),t[e.key]},b.providers=a,b.events=new i({wildcard:!1,maxListeners:0}),b.registerPlugin=function(t,e){f.push(t),f.sort(function(t,e){return(e.priority||0)-(t.priority||0)}),t.__name=e,(t.init||p).call(t,b)},b.getPlugin=function(t){return f.reduce(function(e,r){return e?e:r.__name===t?r:void 0},null)},b.deregisterPlugin=function(t){var e=f.length;return f=f.filter(function(e){return e!==t&&e.__name!==t||((e.deregister||p).call(e,b),!1)}),e!==f.length},e.exports=r.Formio=b}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./providers":7,eventemitter2:1,"native-promise-only":2,"shallow-copy":3,"whatwg-fetch":4}],7:[function(t,e,r){"use strict";e.exports={storage:t("./storage")}},{"./storage":9}],8:[function(t,e,r){"use strict";var n=t("native-promise-only"),o=function(t){return{uploadFile:function(e,r,o,i){return new n(function(n,s){var a=new XMLHttpRequest;"function"==typeof i&&(a.upload.onprogress=i);var u=new FormData;u.append("name",r),u.append("dir",o),u.append("file",e),a.onerror=function(t){t.networkError=!0,s(t)},a.onload=function(){if(a.status>=200&&a.status<300){var t=JSON.parse(a.response);t.storage="dropbox",t.size=e.size,t.type=e.type,t.url=t.path_lower,n(t)}else s(a.response||"Unable to upload file")},a.onabort=function(t){s(t)},a.open("POST",t.formUrl+"/storage/dropbox");var l=!1;try{l=localStorage.getItem("formioToken")}catch(c){}l&&a.setRequestHeader("x-jwt-token",l),a.send(u)})},downloadFile:function(e){var r=!1;try{r=localStorage.getItem("formioToken")}catch(o){}return e.url=t.formUrl+"/storage/dropbox?path_lower="+e.path_lower+(r?"&x-jwt-token="+r:""),n.resolve(e)}}};o.title="Dropbox",e.exports=o},{"native-promise-only":2}],9:[function(t,e,r){"use strict";e.exports={dropbox:t("./dropbox.js"),s3:t("./s3.js"),url:t("./url.js")}},{"./dropbox.js":8,"./s3.js":10,"./url.js":11}],10:[function(t,e,r){"use strict";var n=t("native-promise-only"),o=function(t){return{uploadFile:function(e,r,o,i){return new n(function(n,s){var a=new XMLHttpRequest,u=new FormData;u.append("name",r),u.append("size",e.size),u.append("type",e.type),a.onerror=function(t){t.networkError=!0,s(t)},a.onabort=function(t){s(t)},a.onload=function(){if(a.status>=200&&a.status<300){var t=JSON.parse(a.response),u=new XMLHttpRequest;"function"==typeof i&&(u.upload.onprogress=i),t.data.fileName=r,t.data.key+=o+r;var l=new FormData;for(var c in t.data)l.append(c,t.data[c]);l.append("file",e),u.onerror=function(t){t.networkError=!0,s(t)},u.onload=function(){u.status>=200&&u.status<300?n({storage:"s3",name:r,bucket:t.bucket,key:t.data.key,url:t.url+t.data.key,acl:t.data.acl,size:e.size,type:e.type}):s(u.response||"Unable to upload file")},u.onabort=function(t){s(t)},u.open("POST",t.url),u.send(l)}else s(a.response||"Unable to sign file")},a.open("POST",t.formUrl+"/storage/s3"),a.setRequestHeader("Accept","application/json"),a.setRequestHeader("Content-Type","application/json; charset=UTF-8");var l=!1;try{l=localStorage.getItem("formioToken")}catch(c){}l&&a.setRequestHeader("x-jwt-token",l),a.send(JSON.stringify({name:r,size:e.size,type:e.type}))})},downloadFile:function(e){return"public-read"!==e.acl?t.makeRequest("file",t.formUrl+"/storage/s3?bucket="+e.bucket+"&key="+e.key,"GET"):n.resolve(e)}}};o.title="S3",e.exports=o},{"native-promise-only":2}],11:[function(t,e,r){"use strict";var n=t("native-promise-only"),o=t("../../Formio"),i=function(t){return{title:"Url",name:"url",uploadFile:function(t,e,r,i,s){return new n(function(n,a){var u={dir:r,name:e,file:t},l=new XMLHttpRequest;"function"==typeof i&&(l.upload.onprogress=i);var c=new FormData;for(var f in u)c.append(f,u[f]);l.onload=function(){l.status>=200&&l.status<300?n({storage:"url",name:e,url:l.responseURL+"/"+e,size:t.size,type:t.type}):a(l.response||"Unable to upload file")},l.onerror=function(){a(l)},l.onabort=function(){a(l)},l.open("POST",s),l.setRequestHeader("x-jwt-token",o.getToken()),l.send(c)})},downloadFile:function(t){return n.resolve(t)}}};i.title="Url",e.exports=i},{"../../Formio":5,"native-promise-only":2}]},{},[6]);