!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.Formio=t()}}(function(){var t;return function e(t,n,r){function o(s,u){if(!n[s]){if(!t[s]){var a="function"==typeof require&&require;if(!u&&a)return a(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var f=n[s]={exports:{}};t[s][0].call(f.exports,function(e){var n=t[s][1][e];return o(n?n:e)},f,f.exports,e,t,n,r)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(e,n,r){(function(e){!function(e){"use strict";if("function"==typeof bootstrap)bootstrap("promise",e);else if("object"==typeof r&&"object"==typeof n)n.exports=e();else if("function"==typeof t&&t.amd)t(e);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=e}else{if("undefined"==typeof window&&"undefined"==typeof self)throw new Error("This environment was not anticipated by Q. Please file a bug.");var o="undefined"!=typeof window?window:self,i=o.Q;o.Q=e(),o.Q.noConflict=function(){return o.Q=i,this}}}(function(){"use strict";function t(t){return function(){return V.apply(t,arguments)}}function n(t){return t===Object(t)}function r(t){return"[object StopIteration]"===rt(t)||t instanceof z}function o(t,e){if(Q&&e.stack&&"object"==typeof t&&null!==t&&t.stack&&-1===t.stack.indexOf(ot)){for(var n=[],r=e;r;r=r.source)r.stack&&n.unshift(r.stack);n.unshift(t.stack);var o=n.join("\n"+ot+"\n");t.stack=i(o)}}function i(t){for(var e=t.split("\n"),n=[],r=0;r<e.length;++r){var o=e[r];a(o)||s(o)||!o||n.push(o)}return n.join("\n")}function s(t){return-1!==t.indexOf("(module.js:")||-1!==t.indexOf("(node.js:")}function u(t){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(e)return[e[1],Number(e[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(n)return[n[1],Number(n[2])];var r=/.*@(.+):(\d+)$/.exec(t);return r?[r[1],Number(r[2])]:void 0}function a(t){var e=u(t);if(!e)return!1;var n=e[0],r=e[1];return n===G&&r>=$&&ct>=r}function c(){if(Q)try{throw new Error}catch(t){var e=t.stack.split("\n"),n=e[0].indexOf("@")>0?e[1]:e[2],r=u(n);if(!r)return;return G=r[0],r[1]}}function f(t,e,n){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e+" is deprecated, use "+n+" instead.",new Error("").stack),t.apply(t,arguments)}}function l(t){return t instanceof y?t:w(t)?E(t):U(t)}function p(){function t(t){e=t,i.source=t,K(n,function(e,n){l.nextTick(function(){t.promiseDispatch.apply(t,n)})},void 0),n=void 0,r=void 0}var e,n=[],r=[],o=tt(p.prototype),i=tt(y.prototype);if(i.promiseDispatch=function(t,o,i){var s=Y(arguments);n?(n.push(s),"when"===o&&i[1]&&r.push(i[1])):l.nextTick(function(){e.promiseDispatch.apply(e,s)})},i.valueOf=function(){if(n)return i;var t=v(e);return g(t)&&(e=t),t},i.inspect=function(){return e?e.inspect():{state:"pending"}},l.longStackSupport&&Q)try{throw new Error}catch(s){i.stack=s.stack.substring(s.stack.indexOf("\n")+1)}return o.promise=i,o.resolve=function(n){e||t(l(n))},o.fulfill=function(n){e||t(U(n))},o.reject=function(n){e||t(R(n))},o.notify=function(t){e||K(r,function(e,n){l.nextTick(function(){n(t)})},void 0)},o}function h(t){if("function"!=typeof t)throw new TypeError("resolver must be a function.");var e=p();try{t(e.resolve,e.reject,e.notify)}catch(n){e.reject(n)}return e.promise}function d(t){return h(function(e,n){for(var r=0,o=t.length;o>r;r++)l(t[r]).then(e,n)})}function y(t,e,n){void 0===e&&(e=function(t){return R(new Error("Promise does not support operation: "+t))}),void 0===n&&(n=function(){return{state:"unknown"}});var r=tt(y.prototype);if(r.promiseDispatch=function(n,o,i){var s;try{s=t[o]?t[o].apply(r,i):e.call(r,o,i)}catch(u){s=R(u)}n&&n(s)},r.inspect=n,n){var o=n();"rejected"===o.state&&(r.exception=o.reason),r.valueOf=function(){var t=n();return"pending"===t.state||"rejected"===t.state?r:t.value}}return r}function m(t,e,n,r){return l(t).then(e,n,r)}function v(t){if(g(t)){var e=t.inspect();if("fulfilled"===e.state)return e.value}return t}function g(t){return t instanceof y}function w(t){return n(t)&&"function"==typeof t.then}function b(t){return g(t)&&"pending"===t.inspect().state}function j(t){return!g(t)||"fulfilled"===t.inspect().state}function k(t){return g(t)&&"rejected"===t.inspect().state}function _(){it.length=0,st.length=0,at||(at=!0)}function x(t,n){at&&("object"==typeof e&&"function"==typeof e.emit&&l.nextTick.runAfter(function(){-1!==W(st,t)&&(e.emit("unhandledRejection",n,t),ut.push(t))}),st.push(t),n&&"undefined"!=typeof n.stack?it.push(n.stack):it.push("(no stack) "+n))}function T(t){if(at){var n=W(st,t);-1!==n&&("object"==typeof e&&"function"==typeof e.emit&&l.nextTick.runAfter(function(){var r=W(ut,t);-1!==r&&(e.emit("rejectionHandled",it[n],t),ut.splice(r,1))}),st.splice(n,1),it.splice(n,1))}}function R(t){var e=y({when:function(e){return e&&T(this),e?e(t):this}},function(){return this},function(){return{state:"rejected",reason:t}});return x(e,t),e}function U(t){return y({when:function(){return t},get:function(e){return t[e]},set:function(e,n){t[e]=n},"delete":function(e){delete t[e]},post:function(e,n){return null===e||void 0===e?t.apply(void 0,n):t[e].apply(t,n)},apply:function(e,n){return t.apply(e,n)},keys:function(){return nt(t)}},void 0,function(){return{state:"fulfilled",value:t}})}function E(t){var e=p();return l.nextTick(function(){try{t.then(e.resolve,e.reject,e.notify)}catch(n){e.reject(n)}}),e.promise}function O(t){return y({isDef:function(){}},function(e,n){return I(t,e,n)},function(){return l(t).inspect()})}function A(t,e,n){return l(t).spread(e,n)}function q(t){return function(){function e(t,e){var s;if("undefined"==typeof StopIteration){try{s=n[t](e)}catch(u){return R(u)}return s.done?l(s.value):m(s.value,o,i)}try{s=n[t](e)}catch(u){return r(u)?l(u.value):R(u)}return m(s,o,i)}var n=t.apply(this,arguments),o=e.bind(e,"next"),i=e.bind(e,"throw");return o()}}function P(t){l.done(l.async(t)())}function S(t){throw new z(t)}function F(t){return function(){return A([this,L(arguments)],function(e,n){return t.apply(e,n)})}}function I(t,e,n){return l(t).dispatch(e,n)}function L(t){return m(t,function(t){var e=0,n=p();return K(t,function(r,o,i){var s;g(o)&&"fulfilled"===(s=o.inspect()).state?t[i]=s.value:(++e,m(o,function(r){t[i]=r,0===--e&&n.resolve(t)},n.reject,function(t){n.notify({index:i,value:t})}))},void 0),0===e&&n.resolve(t),n.promise})}function D(t){if(0===t.length)return l.resolve();var e=l.defer(),n=0;return K(t,function(r,o,i){function s(t){e.resolve(t)}function u(){n--,0===n&&e.reject(new Error("Can't get fulfillment value from any promise, all promises were rejected."))}function a(t){e.notify({index:i,value:t})}var c=t[i];n++,m(c,s,u,a)},void 0),e.promise}function N(t){return m(t,function(t){return t=Z(t,l),m(L(Z(t,function(t){return m(t,J,J)})),function(){return t})})}function C(t){return l(t).allSettled()}function B(t,e){return l(t).then(void 0,void 0,e)}function H(t,e){return l(t).nodeify(e)}var Q=!1;try{throw new Error}catch(M){Q=!!M.stack}var G,z,$=c(),J=function(){},X=function(){function t(){for(var t,e;r.next;)r=r.next,t=r.task,r.task=void 0,e=r.domain,e&&(r.domain=void 0,e.enter()),n(t,e);for(;a.length;)t=a.pop(),n(t);i=!1}function n(e,n){try{e()}catch(r){if(u)throw n&&n.exit(),setTimeout(t,0),n&&n.enter(),r;setTimeout(function(){throw r},0)}n&&n.exit()}var r={task:void 0,next:null},o=r,i=!1,s=void 0,u=!1,a=[];if(X=function(t){o=o.next={task:t,domain:u&&e.domain,next:null},i||(i=!0,s())},"object"==typeof e&&"[object process]"===e.toString()&&e.nextTick)u=!0,s=function(){e.nextTick(t)};else if("function"==typeof setImmediate)s="undefined"!=typeof window?setImmediate.bind(window,t):function(){setImmediate(t)};else if("undefined"!=typeof MessageChannel){var c=new MessageChannel;c.port1.onmessage=function(){s=f,c.port1.onmessage=t,t()};var f=function(){c.port2.postMessage(0)};s=function(){setTimeout(t,0),f()}}else s=function(){setTimeout(t,0)};return X.runAfter=function(t){a.push(t),i||(i=!0,s())},X}(),V=Function.call,Y=t(Array.prototype.slice),K=t(Array.prototype.reduce||function(t,e){var n=0,r=this.length;if(1===arguments.length)for(;;){if(n in this){e=this[n++];break}if(++n>=r)throw new TypeError}for(;r>n;n++)n in this&&(e=t(e,this[n],n));return e}),W=t(Array.prototype.indexOf||function(t){for(var e=0;e<this.length;e++)if(this[e]===t)return e;return-1}),Z=t(Array.prototype.map||function(t,e){var n=this,r=[];return K(n,function(o,i,s){r.push(t.call(e,i,s,n))},void 0),r}),tt=Object.create||function(t){function e(){}return e.prototype=t,new e},et=t(Object.prototype.hasOwnProperty),nt=Object.keys||function(t){var e=[];for(var n in t)et(t,n)&&e.push(n);return e},rt=t(Object.prototype.toString);z="undefined"!=typeof ReturnValue?ReturnValue:function(t){this.value=t};var ot="From previous event:";l.resolve=l,l.nextTick=X,l.longStackSupport=!1,"object"==typeof e&&e&&e.env&&e.env.Q_DEBUG&&(l.longStackSupport=!0),l.defer=p,p.prototype.makeNodeResolver=function(){var t=this;return function(e,n){e?t.reject(e):arguments.length>2?t.resolve(Y(arguments,1)):t.resolve(n)}},l.Promise=h,l.promise=h,h.race=d,h.all=L,h.reject=R,h.resolve=l,l.passByCopy=function(t){return t},y.prototype.passByCopy=function(){return this},l.join=function(t,e){return l(t).join(e)},y.prototype.join=function(t){return l([this,t]).spread(function(t,e){if(t===e)return t;throw new Error("Can't join: not the same: "+t+" "+e)})},l.race=d,y.prototype.race=function(){return this.then(l.race)},l.makePromise=y,y.prototype.toString=function(){return"[object Promise]"},y.prototype.then=function(t,e,n){function r(e){try{return"function"==typeof t?t(e):e}catch(n){return R(n)}}function i(t){if("function"==typeof e){o(t,u);try{return e(t)}catch(n){return R(n)}}return R(t)}function s(t){return"function"==typeof n?n(t):t}var u=this,a=p(),c=!1;return l.nextTick(function(){u.promiseDispatch(function(t){c||(c=!0,a.resolve(r(t)))},"when",[function(t){c||(c=!0,a.resolve(i(t)))}])}),u.promiseDispatch(void 0,"when",[void 0,function(t){var e,n=!1;try{e=s(t)}catch(r){if(n=!0,!l.onerror)throw r;l.onerror(r)}n||a.notify(e)}]),a.promise},l.tap=function(t,e){return l(t).tap(e)},y.prototype.tap=function(t){return t=l(t),this.then(function(e){return t.fcall(e).thenResolve(e)})},l.when=m,y.prototype.thenResolve=function(t){return this.then(function(){return t})},l.thenResolve=function(t,e){return l(t).thenResolve(e)},y.prototype.thenReject=function(t){return this.then(function(){throw t})},l.thenReject=function(t,e){return l(t).thenReject(e)},l.nearer=v,l.isPromise=g,l.isPromiseAlike=w,l.isPending=b,y.prototype.isPending=function(){return"pending"===this.inspect().state},l.isFulfilled=j,y.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},l.isRejected=k,y.prototype.isRejected=function(){return"rejected"===this.inspect().state};var it=[],st=[],ut=[],at=!0;l.resetUnhandledRejections=_,l.getUnhandledReasons=function(){return it.slice()},l.stopUnhandledRejectionTracking=function(){_(),at=!1},_(),l.reject=R,l.fulfill=U,l.master=O,l.spread=A,y.prototype.spread=function(t,e){return this.all().then(function(e){return t.apply(void 0,e)},e)},l.async=q,l.spawn=P,l["return"]=S,l.promised=F,l.dispatch=I,y.prototype.dispatch=function(t,e){var n=this,r=p();return l.nextTick(function(){n.promiseDispatch(r.resolve,t,e)}),r.promise},l.get=function(t,e){return l(t).dispatch("get",[e])},y.prototype.get=function(t){return this.dispatch("get",[t])},l.set=function(t,e,n){return l(t).dispatch("set",[e,n])},y.prototype.set=function(t,e){return this.dispatch("set",[t,e])},l.del=l["delete"]=function(t,e){return l(t).dispatch("delete",[e])},y.prototype.del=y.prototype["delete"]=function(t){return this.dispatch("delete",[t])},l.mapply=l.post=function(t,e,n){return l(t).dispatch("post",[e,n])},y.prototype.mapply=y.prototype.post=function(t,e){return this.dispatch("post",[t,e])},l.send=l.mcall=l.invoke=function(t,e){return l(t).dispatch("post",[e,Y(arguments,2)])},y.prototype.send=y.prototype.mcall=y.prototype.invoke=function(t){return this.dispatch("post",[t,Y(arguments,1)])},l.fapply=function(t,e){return l(t).dispatch("apply",[void 0,e])},y.prototype.fapply=function(t){return this.dispatch("apply",[void 0,t])},l["try"]=l.fcall=function(t){return l(t).dispatch("apply",[void 0,Y(arguments,1)])},y.prototype.fcall=function(){return this.dispatch("apply",[void 0,Y(arguments)])},l.fbind=function(t){var e=l(t),n=Y(arguments,1);return function(){return e.dispatch("apply",[this,n.concat(Y(arguments))])}},y.prototype.fbind=function(){var t=this,e=Y(arguments);return function(){return t.dispatch("apply",[this,e.concat(Y(arguments))])}},l.keys=function(t){return l(t).dispatch("keys",[])},y.prototype.keys=function(){return this.dispatch("keys",[])},l.all=L,y.prototype.all=function(){return L(this)},l.any=D,y.prototype.any=function(){return D(this)},l.allResolved=f(N,"allResolved","allSettled"),y.prototype.allResolved=function(){return N(this)},l.allSettled=C,y.prototype.allSettled=function(){return this.then(function(t){return L(Z(t,function(t){function e(){return t.inspect()}return t=l(t),t.then(e,e)}))})},l.fail=l["catch"]=function(t,e){return l(t).then(void 0,e)},y.prototype.fail=y.prototype["catch"]=function(t){return this.then(void 0,t)},l.progress=B,y.prototype.progress=function(t){return this.then(void 0,void 0,t)},l.fin=l["finally"]=function(t,e){return l(t)["finally"](e)},y.prototype.fin=y.prototype["finally"]=function(t){return t=l(t),this.then(function(e){return t.fcall().then(function(){return e})},function(e){return t.fcall().then(function(){throw e})})},l.done=function(t,e,n,r){return l(t).done(e,n,r)},y.prototype.done=function(t,n,r){var i=function(t){l.nextTick(function(){if(o(t,s),!l.onerror)throw t;l.onerror(t)})},s=t||n||r?this.then(t,n,r):this;"object"==typeof e&&e&&e.domain&&(i=e.domain.bind(i)),s.then(void 0,i)},l.timeout=function(t,e,n){return l(t).timeout(e,n)},y.prototype.timeout=function(t,e){var n=p(),r=setTimeout(function(){e&&"string"!=typeof e||(e=new Error(e||"Timed out after "+t+" ms"),e.code="ETIMEDOUT"),n.reject(e)},t);return this.then(function(t){clearTimeout(r),n.resolve(t)},function(t){clearTimeout(r),n.reject(t)},n.notify),n.promise},l.delay=function(t,e){return void 0===e&&(e=t,t=void 0),l(t).delay(e)},y.prototype.delay=function(t){return this.then(function(e){var n=p();return setTimeout(function(){n.resolve(e)},t),n.promise})},l.nfapply=function(t,e){return l(t).nfapply(e)},y.prototype.nfapply=function(t){var e=p(),n=Y(t);return n.push(e.makeNodeResolver()),this.fapply(n).fail(e.reject),e.promise},l.nfcall=function(t){var e=Y(arguments,1);return l(t).nfapply(e)},y.prototype.nfcall=function(){var t=Y(arguments),e=p();return t.push(e.makeNodeResolver()),this.fapply(t).fail(e.reject),e.promise},l.nfbind=l.denodeify=function(t){var e=Y(arguments,1);return function(){var n=e.concat(Y(arguments)),r=p();return n.push(r.makeNodeResolver()),l(t).fapply(n).fail(r.reject),r.promise}},y.prototype.nfbind=y.prototype.denodeify=function(){var t=Y(arguments);return t.unshift(this),l.denodeify.apply(void 0,t)},l.nbind=function(t,e){var n=Y(arguments,2);return function(){function r(){return t.apply(e,arguments)}var o=n.concat(Y(arguments)),i=p();return o.push(i.makeNodeResolver()),l(r).fapply(o).fail(i.reject),i.promise}},y.prototype.nbind=function(){var t=Y(arguments,0);return t.unshift(this),l.nbind.apply(void 0,t)},l.nmapply=l.npost=function(t,e,n){return l(t).npost(e,n)},y.prototype.nmapply=y.prototype.npost=function(t,e){var n=Y(e||[]),r=p();return n.push(r.makeNodeResolver()),this.dispatch("post",[t,n]).fail(r.reject),r.promise},l.nsend=l.nmcall=l.ninvoke=function(t,e){var n=Y(arguments,2),r=p();return n.push(r.makeNodeResolver()),l(t).dispatch("post",[e,n]).fail(r.reject),r.promise},y.prototype.nsend=y.prototype.nmcall=y.prototype.ninvoke=function(t){var e=Y(arguments,1),n=p();return e.push(n.makeNodeResolver()),this.dispatch("post",[t,e]).fail(n.reject),n.promise},l.nodeify=H,y.prototype.nodeify=function(t){return t?void this.then(function(e){l.nextTick(function(){t(null,e)})},function(e){l.nextTick(function(){t(e)})}):this},l.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var ct=c();return l})}).call(this,e("_process"))},{_process:2}],2:[function(t,e,n){function r(){f=!1,u.length?c=u.concat(c):l=-1,c.length&&o()}function o(){if(!f){var t=setTimeout(r);f=!0;for(var e=c.length;e;){for(u=c,c=[];++l<e;)u&&u[l].run();l=-1,e=c.length}u=null,f=!1,clearTimeout(t)}}function i(t,e){this.fun=t,this.array=e}function s(){}var u,a=e.exports={},c=[],f=!1,l=-1;a.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new i(t,e)),1!==c.length||f||setTimeout(o,0)},i.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=s,a.addListener=s,a.once=s,a.off=s,a.removeListener=s,a.removeAllListeners=s,a.emit=s,a.binding=function(t){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(t){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},{}],3:[function(e,n,r){!function(e){function n(){this._events={},this._conf&&o.call(this,this._conf)}function o(t){t&&(this._conf=t,t.delimiter&&(this.delimiter=t.delimiter),t.maxListeners&&(this._events.maxListeners=t.maxListeners),t.wildcard&&(this.wildcard=t.wildcard),t.newListener&&(this.newListener=t.newListener),this.wildcard&&(this.listenerTree={}))}function i(t){this._events={},this.newListener=!1,o.call(this,t)}function s(t,e,n,r){if(!n)return[];var o,i,u,a,c,f,l,p=[],h=e.length,d=e[r],y=e[r+1];if(r===h&&n._listeners){if("function"==typeof n._listeners)return t&&t.push(n._listeners),[n];for(o=0,i=n._listeners.length;i>o;o++)t&&t.push(n._listeners[o]);return[n]}if("*"===d||"**"===d||n[d]){if("*"===d){for(u in n)"_listeners"!==u&&n.hasOwnProperty(u)&&(p=p.concat(s(t,e,n[u],r+1)));return p}if("**"===d){l=r+1===h||r+2===h&&"*"===y,l&&n._listeners&&(p=p.concat(s(t,e,n,h)));for(u in n)"_listeners"!==u&&n.hasOwnProperty(u)&&("*"===u||"**"===u?(n[u]._listeners&&!l&&(p=p.concat(s(t,e,n[u],h))),p=p.concat(s(t,e,n[u],r))):p=u===y?p.concat(s(t,e,n[u],r+2)):p.concat(s(t,e,n[u],r)));return p}p=p.concat(s(t,e,n[d],r+1))}if(a=n["*"],a&&s(t,e,a,r+1),c=n["**"])if(h>r){c._listeners&&s(t,e,c,h);for(u in c)"_listeners"!==u&&c.hasOwnProperty(u)&&(u===y?s(t,e,c[u],r+2):u===d?s(t,e,c[u],r+1):(f={},f[u]=c[u],s(t,e,{"**":f},r+1)))}else c._listeners?s(t,e,c,h):c["*"]&&c["*"]._listeners&&s(t,e,c["*"],h);return p}function u(t,e){t="string"==typeof t?t.split(this.delimiter):t.slice();for(var n=0,r=t.length;r>n+1;n++)if("**"===t[n]&&"**"===t[n+1])return;for(var o=this.listenerTree,i=t.shift();i;){if(o[i]||(o[i]={}),o=o[i],0===t.length){if(o._listeners){if("function"==typeof o._listeners)o._listeners=[o._listeners,e];else if(a(o._listeners)&&(o._listeners.push(e),!o._listeners.warned)){var s=c;"undefined"!=typeof this._events.maxListeners&&(s=this._events.maxListeners),s>0&&o._listeners.length>s&&(o._listeners.warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",o._listeners.length),console.trace())}}else o._listeners=e;return!0}i=t.shift()}return!0}var a=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},c=10;i.prototype.delimiter=".",i.prototype.setMaxListeners=function(t){this._events||n.call(this),this._events.maxListeners=t,this._conf||(this._conf={}),this._conf.maxListeners=t},i.prototype.event="",i.prototype.once=function(t,e){return this.many(t,1,e),this},i.prototype.many=function(t,e,n){function r(){0===--e&&o.off(t,r),n.apply(this,arguments)}var o=this;if("function"!=typeof n)throw new Error("many only accepts instances of Function");return r._origin=n,this.on(t,r),o},i.prototype.emit=function(){this._events||n.call(this);var t=arguments[0];if("newListener"===t&&!this.newListener&&!this._events.newListener)return!1;if(this._all){for(var e=arguments.length,r=new Array(e-1),o=1;e>o;o++)r[o-1]=arguments[o];for(o=0,e=this._all.length;e>o;o++)this.event=t,this._all[o].apply(this,r)}if("error"===t&&!(this._all||this._events.error||this.wildcard&&this.listenerTree.error))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");var i;if(this.wildcard){i=[];var u="string"==typeof t?t.split(this.delimiter):t.slice();s.call(this,i,u,this.listenerTree,0)}else i=this._events[t];if("function"==typeof i){if(this.event=t,1===arguments.length)i.call(this);else if(arguments.length>1)switch(arguments.length){case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:for(var e=arguments.length,r=new Array(e-1),o=1;e>o;o++)r[o-1]=arguments[o];i.apply(this,r)}return!0}if(i){for(var e=arguments.length,r=new Array(e-1),o=1;e>o;o++)r[o-1]=arguments[o];for(var a=i.slice(),o=0,e=a.length;e>o;o++)this.event=t,a[o].apply(this,r);return a.length>0||!!this._all}return!!this._all},i.prototype.on=function(t,e){if("function"==typeof t)return this.onAny(t),this;if("function"!=typeof e)throw new Error("on only accepts instances of Function");if(this._events||n.call(this),this.emit("newListener",t,e),this.wildcard)return u.call(this,t,e),this;if(this._events[t]){if("function"==typeof this._events[t])this._events[t]=[this._events[t],e];else if(a(this._events[t])&&(this._events[t].push(e),!this._events[t].warned)){var r=c;"undefined"!=typeof this._events.maxListeners&&(r=this._events.maxListeners),r>0&&this._events[t].length>r&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),console.trace())}}else this._events[t]=e;return this},i.prototype.onAny=function(t){if("function"!=typeof t)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),this._all.push(t),this},i.prototype.addListener=i.prototype.on,i.prototype.off=function(t,e){if("function"!=typeof e)throw new Error("removeListener only takes instances of Function");var n,r=[];if(this.wildcard){var o="string"==typeof t?t.split(this.delimiter):t.slice();r=s.call(this,null,o,this.listenerTree,0)}else{if(!this._events[t])return this;n=this._events[t],r.push({_listeners:n})}for(var i=0;i<r.length;i++){var u=r[i];if(n=u._listeners,a(n)){for(var c=-1,f=0,l=n.length;l>f;f++)if(n[f]===e||n[f].listener&&n[f].listener===e||n[f]._origin&&n[f]._origin===e){c=f;break}if(0>c)continue;return this.wildcard?u._listeners.splice(c,1):this._events[t].splice(c,1),0===n.length&&(this.wildcard?delete u._listeners:delete this._events[t]),this}(n===e||n.listener&&n.listener===e||n._origin&&n._origin===e)&&(this.wildcard?delete u._listeners:delete this._events[t])}return this},i.prototype.offAny=function(t){var e,n=0,r=0;if(t&&this._all&&this._all.length>0){for(e=this._all,n=0,r=e.length;r>n;n++)if(t===e[n])return e.splice(n,1),this}else this._all=[];return this},i.prototype.removeListener=i.prototype.off,i.prototype.removeAllListeners=function(t){if(0===arguments.length)return!this._events||n.call(this),this;if(this.wildcard)for(var e="string"==typeof t?t.split(this.delimiter):t.slice(),r=s.call(this,null,e,this.listenerTree,0),o=0;o<r.length;o++){var i=r[o];i._listeners=null}else{if(!this._events[t])return this;this._events[t]=null}return this},i.prototype.listeners=function(t){if(this.wildcard){var e=[],r="string"==typeof t?t.split(this.delimiter):t.slice();return s.call(this,e,r,this.listenerTree,0),e}return this._events||n.call(this),this._events[t]||(this._events[t]=[]),a(this._events[t])||(this._events[t]=[this._events[t]]),this._events[t]},i.prototype.listenersAny=function(){return this._all?this._all:[]},"function"==typeof t&&t.amd?t(function(){return i}):"object"==typeof r?r.EventEmitter2=i:window.EventEmitter2=i}()},{}],4:[function(t,e,n){e.exports=function(t){if(!t||"object"!=typeof t)return t;var e;if(o(t)){var n=t.length;e=Array(n);for(var i=0;n>i;i++)e[i]=t[i]}else{var s=r(t);e={};for(var i=0,u=s.length;u>i;i++){var a=s[i];e[a]=t[a]}}return e};var r=Object.keys||function(t){var e=[];for(var n in t)({}).hasOwnProperty.call(t,n)&&e.push(n);return e},o=Array.isArray||function(t){return"[object Array]"==={}.toString.call(t)}},{}],5:[function(t,e,n){!function(){"use strict";function t(t){if("string"!=typeof t&&(t=t.toString()),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function e(t){return"string"!=typeof t&&(t=t.toString()),t}function n(t){this.map={},t instanceof n?t.forEach(function(t,e){this.append(e,t)},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function r(t){return t.bodyUsed?Promise.reject(new TypeError("Already read")):void(t.bodyUsed=!0)}function o(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function i(t){var e=new FileReader;return e.readAsArrayBuffer(t),o(e)}function s(t){var e=new FileReader;return e.readAsText(t),o(e)}function u(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,"string"==typeof t)this._bodyText=t;else if(h.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(h.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else{if(t)throw new Error("unsupported BodyInit type");this._bodyText=""}},h.blob?(this.blob=function(){var t=r(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(i)},this.text=function(){var t=r(this);if(t)return t;if(this._bodyBlob)return s(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var t=r(this);return t?t:Promise.resolve(this._bodyText)},h.formData&&(this.formData=function(){return this.text().then(f)}),this.json=function(){return this.text().then(JSON.parse)},this}function a(t){var e=t.toUpperCase();return d.indexOf(e)>-1?e:t}function c(t,e){if(e=e||{},this.url=t,this.credentials=e.credentials||"omit",this.headers=new n(e.headers),this.method=a(e.method||"GET"),this.mode=e.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&e.body)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(e.body)}function f(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(o))}}),e}function l(t){var e=new n,r=t.getAllResponseHeaders().trim().split("\n");return r.forEach(function(t){var n=t.trim().split(":"),r=n.shift().trim(),o=n.join(":").trim();e.append(r,o)}),e}function p(t,e){e||(e={}),this._initBody(t),this.type="default",this.url=null,this.status=e.status,this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText,this.headers=e.headers instanceof n?e.headers:new n(e.headers),this.url=e.url||""}if(!self.fetch){n.prototype.append=function(n,r){n=t(n),r=e(r);var o=this.map[n];o||(o=[],this.map[n]=o),o.push(r)},n.prototype["delete"]=function(e){delete this.map[t(e)]},n.prototype.get=function(e){var n=this.map[t(e)];return n?n[0]:null},n.prototype.getAll=function(e){return this.map[t(e)]||[]},n.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},n.prototype.set=function(n,r){this.map[t(n)]=[e(r)]},n.prototype.forEach=function(t,e){Object.getOwnPropertyNames(this.map).forEach(function(n){this.map[n].forEach(function(r){t.call(e,r,n,this)},this)},this)};var h={blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in self},d=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];u.call(c.prototype),u.call(p.prototype),self.Headers=n,self.Request=c,self.Response=p,self.fetch=function(t,e){var n;return n=c.prototype.isPrototypeOf(t)&&!e?t:new c(t,e),new Promise(function(t,e){function r(){return"responseURL"in o?o.responseURL:/^X-Request-URL:/m.test(o.getAllResponseHeaders())?o.getResponseHeader("X-Request-URL"):void 0}var o=new XMLHttpRequest;o.onload=function(){var n=1223===o.status?204:o.status;if(100>n||n>599)return void e(new TypeError("Network request failed"));var i={status:n,statusText:o.statusText,headers:l(o),url:r()},s="response"in o?o.response:o.responseText;t(new p(s,i))},o.onerror=function(){e(new TypeError("Network request failed"))},o.open(n.method,n.url,!0),"include"===n.credentials&&(o.withCredentials=!0),"responseType"in o&&h.blob&&(o.responseType="blob"),n.headers.forEach(function(t,e){o.setRequestHeader(e,t)}),o.send("undefined"==typeof n._bodyInit?null:n._bodyInit)})},self.fetch.polyfill=!0}}()},{}],6:[function(t,e,n){"use strict";t("whatwg-fetch");var r=t("Q"),o=t("eventemitter2").EventEmitter2,i=t("shallow-copy"),s=t("./providers"),u="https://api.form.io",a=u,c=!1,f=[],l={},p=function(){},h=function(t){return t},d=function(t){var e=[].slice.call(arguments,1);return r.all(f.map(function(n){return(n[t]||p).apply(n,e)}))},y=function(t){var e=[].slice.call(arguments,0),n=function(t,o){var i=f[t];return i?r((i&&i[o]||p).apply(i,[].slice.call(arguments,2))).then(function(r){return null!==r&&void 0!==r?r:n.apply(null,[t+1].concat(e))}):r(null)};return n.apply(null,[0].concat(e))},m=function(t,e){var n=[].slice.call(arguments,2);return f.reduce(function(e,r){return(r[t]||h).apply(r,[e].concat(n))},e)},v=function(t){var e="^(http[s]?:\\/\\/)";return e+=u&&0===t.indexOf(u)?"("+u.replace(/^http[s]?:\/\//,"")+")":"([^/]+)",e+="($|\\/.*)",t.match(new RegExp(e))},g=function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e.join("&")},w=function(t){if(!(this instanceof w))return new w(t);if(!t)return this.projectUrl=u+"/project",this.projectsUrl=u+"/project",this.projectId=!1,void(this.query="");this.projectsUrl="",this.projectUrl="",this.projectId="",this.formUrl="",this.formsUrl="",this.formId="",this.submissionsUrl="",this.submissionUrl="",this.submissionId="",this.actionsUrl="",this.actionId="",this.actionUrl="",this.query="",0!==t.indexOf("http")&&0!==t.indexOf("//")&&(u=u?u:window.location.href.match(/http[s]?:\/\/api./)[0],t=u+t);var e=v(t),n=[],r=e[1]+e[2];t=e.length>3?e[3]:"";var o=t.split("?");if(o.length>1&&(t=o[0],this.query="?"+o[1]),-1!==t.search(/(^|\/)(form|project)($|\/)/)){var i=function(e,r){this[e+"sUrl"]=r+"/"+e;var o=new RegExp("/"+e+"/([^/]+)");return-1!==t.search(o)&&(n=t.match(o),this[e+"Url"]=n?r+n[0]:"",this[e+"Id"]=n.length>1?n[1]:"",r+=n[0]),r}.bind(this),s=function(t,e,n){for(var r in t)if(t.hasOwnProperty(r)){var o=t[r];if(o instanceof Array)s(o,e,!0);else{var u=i(o,e);e=n?e:u}}};s(["project","form",["submission","action"]],r),this.projectId||e.length>2&&e[2].split(".").length>2&&(this.projectUrl=r,this.projectId=e[2].split(".")[0])}else{this.projectUrl=r,this.projectId=e.length>2?e[2].split(".")[0]:"";var f=new RegExp("/(submission|action)($|/.*)"),l=t.match(f);this.pathType=l&&l.length>1?l[1]:"",t=t.replace(f,""),t=t.replace(/\/$/,""),this.formsUrl=r+"/form",this.formUrl=r+t,this.formId=t.replace(/^\/+|\/+$/g,"");var p=["submission","action"];for(var h in p)if(p.hasOwnProperty(h)){var d=p[h];this[d+"sUrl"]=r+t+"/"+d,this.pathType===d&&l.length>2&&l[2]&&(this[d+"Id"]=l[2].replace(/^\/+|\/+$/g,""),this[d+"Url"]=r+t+l[0])}}c||(a=this.projectUrl)},b=function(t){var e=t+"Id",n=t+"Url";
return function(o,i){return o&&"object"==typeof o&&(o=g(o.params)),o=o?this.query?this.query+"&"+o:"?"+o:this.query,this[e]?this.makeRequest(t,this[n]+o,"get",null,i):r.reject("Missing "+e)}},j=function(t){var e=t+"Id",n=t+"Url";return function(r,o){var i=this[e]?"put":"post",s=this[e]?this[n]:this[t+"sUrl"];return l={},this.makeRequest(t,s+this.query,i,r,o)}},k=function(t){var e=t+"Id",n=t+"Url";return function(o){return this[e]||r.reject("Nothing to delete"),l={},this.makeRequest(t,this[n],"delete",null,o)}},_=function(t){var e=t+"Url";return function(n,r){return n=n||"",n&&"object"==typeof n&&(n="?"+g(n.params)),this.makeRequest(t,this[e]+n,"get",null,r)}};w.prototype.makeRequest=function(t,e,n,r,o){var i=this;n=(n||"GET").toUpperCase(),o&&"object"==typeof o||(o={});var s={formio:i,type:t,url:e,method:n,data:r,opts:o},u=d("preRequest",s).then(function(){return y("request",s).then(function(t){return null===t||void 0===t?w.request(e,n,r):t})});return m("wrapRequestPromise",u,s)},w.prototype.loadProject=b("project"),w.prototype.saveProject=j("project"),w.prototype.deleteProject=k("project"),w.prototype.loadForm=b("form"),w.prototype.saveForm=j("form"),w.prototype.deleteForm=k("form"),w.prototype.loadForms=_("forms"),w.prototype.loadSubmission=b("submission"),w.prototype.saveSubmission=j("submission"),w.prototype.deleteSubmission=k("submission"),w.prototype.loadSubmissions=_("submissions"),w.prototype.loadAction=b("action"),w.prototype.saveAction=j("action"),w.prototype.deleteAction=k("action"),w.prototype.loadActions=_("actions"),w.prototype.availableActions=function(){return this.makeRequest("availableActions",this.formUrl+"/actions")},w.prototype.actionInfo=function(t){return this.makeRequest("actionInfo",this.formUrl+"/actions/"+t)},w.prototype.uploadFile=function(t,e,n,r,o){var i={provider:t,method:"upload",file:e,fileName:n,dir:r},u=d("preRequest",i).then(function(){if(s.storage.hasOwnProperty(t)){var i=new s.storage[t](this);return i.uploadFile(e,n,r,o)}throw"Storage provider not found"}.bind(this));return m("wrapFileRequestPromise",u,i)},w.prototype.downloadFile=function(t){var e={method:"download",file:t},n=d("preRequest",e).then(function(){return y("fileRequest",e).then(function(e){if(null===e||void 0===e){if(s.storage.hasOwnProperty(t.storage)){var n=new s.storage[t.storage](this);return n.downloadFile(t)}throw"Storage provider not found"}return e}.bind(this))}.bind(this));return m("wrapFileRequestPromise",n,e)},w.makeStaticRequest=function(t,e,n){e=(e||"GET").toUpperCase();var r={url:t,method:e,data:n},o=d("preRequest",r).then(function(){return y("staticRequest",r).then(function(r){return null===r||void 0===r?w.request(t,e,n):r})});return d("preRequest",r).then(function(){return m("wrapStaticRequestPromise",o,r)})},w.loadProjects=function(t){return t=t||"","object"==typeof t&&(t="?"+g(t.params)),this.makeStaticRequest(u+"/project"+t)},w.request=function(t,e,n){if(!t)return r.reject("No url provided");e=(e||"GET").toUpperCase();var o=btoa(t);return r().then(function(){return"GET"===e&&l.hasOwnProperty(o)?l[o]:r().then(function(){var r=new Headers({Accept:"application/json","Content-type":"application/json; charset=UTF-8"}),o=w.getToken();o&&r.append("x-jwt-token",o);var i={method:e,headers:r,mode:"cors"};return n&&(i.body=JSON.stringify(n)),fetch(t,i)})["catch"](function(t){throw t.message="Could not connect to API server ("+t.message+")",t.networkError=!0,t}).then(function(t){if(t.ok){var e=t.headers.get("x-jwt-token");return t.status>=200&&t.status<300&&e&&""!==e&&w.setToken(e),204===t.status?{}:(-1!==t.headers.get("content-type").indexOf("application/json")?t.json():t.text()).then(function(e){var n=t.headers.get("content-range");if(n&&"object"==typeof e){if(n=n.split("/"),"*"!==n[0]){var r=n[0].split("-");e.skip=Number(r[0]),e.limit=r[1]-r[0]+1}e.serverCount="*"===n[1]?n[1]:Number(n[1])}return e})}return 440===t.status?(w.setToken(null),w.events.emit("formio.sessionExpired",t.body)):401===t.status&&w.events.emit("formio.unauthorized",t.body),(-1!==t.headers.get("content-type").indexOf("application/json")?t.json():t.text()).then(function(t){throw t})})["catch"](function(t){throw"Bad Token"===t&&(w.setToken(null),w.events.emit("formio.badToken",t)),delete l[o],t})}).then(function(t){if("GET"===e&&(l[o]=r(t)),Array.isArray(t)){var n=t.map(i);return n.skip=t.skip,n.limit=t.limit,n.serverCount=t.serverCount,n}return i(t)})},w.setToken=function(t){if(t=t||"",t!==this.token){if(this.token=t,!t){w.setUser(null);try{return localStorage.removeItem("formioToken")}catch(e){return}}try{localStorage.setItem("formioToken",t)}catch(e){}w.currentUser()}},w.getToken=function(){if(this.token)return this.token;var t=localStorage.getItem("formioToken")||"";return this.token=t,t},w.setUser=function(t){if(!t){this.setToken(null);try{return localStorage.removeItem("formioUser")}catch(e){return}}try{localStorage.setItem("formioUser",JSON.stringify(t))}catch(e){}},w.getUser=function(){return JSON.parse(localStorage.getItem("formioUser")||null)},w.setBaseUrl=function(t){u=t,c||(a=t)},w.getBaseUrl=function(){return u},w.setAppUrl=function(t){a=t,c=!0},w.getAppUrl=function(){return a},w.clearCache=function(){l={}},w.currentUser=function(){var t=u+"/current",e=this.getUser();if(e)return m("wrapStaticRequestPromise",r(e),{url:t,method:"GET"});var n=this.getToken();return n?this.makeStaticRequest(t).then(function(t){return w.setUser(t),t}):m("wrapStaticRequestPromise",r(null),{url:t,method:"GET"})},w.logout=function(){return this.makeStaticRequest(u+"/logout")["finally"](function(){this.setToken(null),this.setUser(null),w.clearCache()}.bind(this))},w.fieldData=function(t,e){if(!t)return"";if(!e||!e.key)return t;if(-1!==e.key.indexOf(".")){for(var n=t,r=e.key.split("."),o="",i=0;i<r.length;i++){if(o=r[i],n.hasOwnProperty("_id")&&(n=n.data),!n.hasOwnProperty(o))return;o===r[r.length-1]&&e.multiple&&!Array.isArray(n[o])&&(n[o]=[n[o]]),n=n[o]}return n}return e.multiple&&!Array.isArray(t[e.key])&&(t[e.key]=[t[e.key]]),t[e.key]},w.providers=s,w.events=new o({wildcard:!1,maxListeners:0}),w.registerPlugin=function(t,e){f.push(t),f.sort(function(t,e){return(e.priority||0)-(t.priority||0)}),t.__name=e,(t.init||p).call(t,w)},w.getPlugin=function(t){return f.reduce(function(e,n){return e?e:n.__name===t?n:void 0},null)},w.deregisterPlugin=function(t){var e=f.length;return f=f.filter(function(e){return e!==t&&e.__name!==t?!0:((e.deregister||p).call(e,w),!1)}),e!==f.length},e.exports=w},{"./providers":7,Q:1,eventemitter2:3,"shallow-copy":4,"whatwg-fetch":5}],7:[function(t,e,n){e.exports={storage:t("./storage")}},{"./storage":9}],8:[function(t,e,n){var r=t("Q"),o=function(t){var e=function(){var t;return t};return{uploadFile:function(t,n,o,i){var s=r.defer(),o=$scope.component.dir||"",u=e();if(u){var a=new XMLHttpRequest;a.upload.onprogress=i,a.onload=function(){200===a.status?s.resolve(JSON.parse(a.response)):s.reject(a.response||"Unable to upload file")},a.open("POST","https://content.dropboxapi.com/2/files/upload"),a.setRequestHeader("Authorization","Bearer "+u),a.setRequestHeader("Content-Type","application/octet-stream"),a.setRequestHeader("Dropbox-API-Arg",JSON.stringify({path:"/"+o+n,mode:"add",autorename:!0,mute:!1})),a.send(t)}else s.reject("You must authenticate with dropbox before uploading files.");return s.promise},downloadFile:function(t){var n=r.defer(),o=e();if(o){var i=new XMLHttpRequest;i.responseType="arraybuffer",i.onload=function(){200===i.status?n.resolve(i.response):n.reject(i.response||"Unable to download file")},i.open("POST","https://content.dropboxapi.com/2/files/download"),i.setRequestHeader("Authorization","Bearer "+o),i.setRequestHeader("Dropbox-API-Arg",JSON.stringify({path:t.path_lower})),i.send()}else n.reject("You must authenticate with dropbox before downloading files.");return n.promise}}};o.title="Dropbox",o.name="dropbox",e.exports=o},{Q:1}],9:[function(t,e,n){e.exports={dropbox:t("./dropbox.js"),s3:t("./s3.js"),url:t("./url.js")}},{"./dropbox.js":8,"./s3.js":10,"./url.js":11}],10:[function(t,e,n){var r=t("Q"),o=function(t){return{uploadFile:function(e,n,o,i){var s=r.defer(),u=new XMLHttpRequest,a=new FormData;return a.append("name",n),a.append("size",e.size),a.append("type",e.type),u.onerror=function(t){t.networkError=!0,s.reject(t)},u.onabort=function(t){s.reject(t)},u.onload=function(){if(u.status>=200&&u.status<300){var t=JSON.parse(u.response),r=new XMLHttpRequest;"function"==typeof i&&(r.upload.onprogress=i),t.data.fileName=n,t.data.key+=o+n;var a=new FormData;for(var c in t.data)a.append(c,t.data[c]);a.append("file",e),r.onerror=function(t){t.networkError=!0,s.reject(t)},r.onload=function(){r.status>=200&&r.status<300?s.resolve({storage:"s3",name:n,bucket:t.bucket,key:t.data.key,url:t.url+t.data.key,acl:t.data.acl,size:e.size,type:e.type}):s.reject(r.response||"Unable to upload file")},r.onabort=function(t){s.reject(t)},r.open("POST",t.url),r.send(a)}else s.reject(u.response||"Unable to sign file")},u.open("POST",t.formUrl+"/storage/s3"),u.setRequestHeader("Accept","application/json"),u.setRequestHeader("Content-Type","application/json; charset=UTF-8"),u.setRequestHeader("x-jwt-token",localStorage.getItem("formioToken")),u.send(JSON.stringify({name:n,size:e.size,type:e.type})),s.promise},downloadFile:function(e){return"public-read"!==e.acl?t.makeRequest("file",t.formUrl+"/storage/s3?bucket="+e.bucket+"&key="+e.key,"GET"):r(e)}}};o.title="S3",o.name="s3",e.exports=o},{Q:1}],11:[function(t,e,n){var r=t("Q"),o=function(t){return{title:"Url",name:"url",uploadFile:function(t,e,n,o){var i=r.defer(),s={dir:n,name:e,file:t},u=new XMLHttpRequest;"function"==typeof o&&(u.upload.onprogress=o),fd=new FormData;for(var a in s)fd.append(a,s[a]);return u.onload=function(){u.status>=200&&u.status<300?i.resolve({storage:"url",name:e,url:u.response.url,size:t.size,type:t.type}):i.reject(u.response||"Unable to upload file")},u.onerror=function(){i.reject(u)},u.onabort=function(){i.reject(u)},u.open("POST",response.url),u.send(fd),i.promise},downloadFile:function(t){r(t)}}};o.name="url",o.title="Url",e.exports=o},{Q:1}]},{},[6])(6)});