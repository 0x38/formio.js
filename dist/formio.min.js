!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.formiojs=t()}}(function(){var t;return function e(t,n,r){function i(s,u){if(!n[s]){if(!t[s]){var a="function"==typeof require&&require;if(!u&&a)return a(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var f=n[s]={exports:{}};t[s][0].call(f.exports,function(e){var n=t[s][1][e];return i(n?n:e)},f,f.exports,e,t,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,n,r){(function(e){!function(e){"use strict";if("function"==typeof bootstrap)bootstrap("promise",e);else if("object"==typeof r&&"object"==typeof n)n.exports=e();else if("function"==typeof t&&t.amd)t(e);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=e}else{if("undefined"==typeof window&&"undefined"==typeof self)throw new Error("This environment was not anticipated by Q. Please file a bug.");var i="undefined"!=typeof window?window:self,o=i.Q;i.Q=e(),i.Q.noConflict=function(){return i.Q=o,this}}}(function(){"use strict";function t(t){return function(){return z.apply(t,arguments)}}function n(t){return t===Object(t)}function r(t){return"[object StopIteration]"===rt(t)||t instanceof $}function i(t,e){if(Q&&e.stack&&"object"==typeof t&&null!==t&&t.stack&&-1===t.stack.indexOf(it)){for(var n=[],r=e;r;r=r.source)r.stack&&n.unshift(r.stack);n.unshift(t.stack);var i=n.join("\n"+it+"\n");t.stack=o(i)}}function o(t){for(var e=t.split("\n"),n=[],r=0;r<e.length;++r){var i=e[r];a(i)||s(i)||!i||n.push(i)}return n.join("\n")}function s(t){return-1!==t.indexOf("(module.js:")||-1!==t.indexOf("(node.js:")}function u(t){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(e)return[e[1],Number(e[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(n)return[n[1],Number(n[2])];var r=/.*@(.+):(\d+)$/.exec(t);return r?[r[1],Number(r[2])]:void 0}function a(t){var e=u(t);if(!e)return!1;var n=e[0],r=e[1];return n===M&&r>=J&&ct>=r}function c(){if(Q)try{throw new Error}catch(t){var e=t.stack.split("\n"),n=e[0].indexOf("@")>0?e[1]:e[2],r=u(n);if(!r)return;return M=r[0],r[1]}}function f(t,e,n){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e+" is deprecated, use "+n+" instead.",new Error("").stack),t.apply(t,arguments)}}function l(t){return t instanceof y?t:w(t)?R(t):U(t)}function p(){function t(t){e=t,o.source=t,W(n,function(e,n){l.nextTick(function(){t.promiseDispatch.apply(t,n)})},void 0),n=void 0,r=void 0}var e,n=[],r=[],i=tt(p.prototype),o=tt(y.prototype);if(o.promiseDispatch=function(t,i,o){var s=K(arguments);n?(n.push(s),"when"===i&&o[1]&&r.push(o[1])):l.nextTick(function(){e.promiseDispatch.apply(e,s)})},o.valueOf=function(){if(n)return o;var t=m(e);return g(t)&&(e=t),t},o.inspect=function(){return e?e.inspect():{state:"pending"}},l.longStackSupport&&Q)try{throw new Error}catch(s){o.stack=s.stack.substring(s.stack.indexOf("\n")+1)}return i.promise=o,i.resolve=function(n){e||t(l(n))},i.fulfill=function(n){e||t(U(n))},i.reject=function(n){e||t(E(n))},i.notify=function(t){e||W(r,function(e,n){l.nextTick(function(){n(t)})},void 0)},i}function h(t){if("function"!=typeof t)throw new TypeError("resolver must be a function.");var e=p();try{t(e.resolve,e.reject,e.notify)}catch(n){e.reject(n)}return e.promise}function d(t){return h(function(e,n){for(var r=0,i=t.length;i>r;r++)l(t[r]).then(e,n)})}function y(t,e,n){void 0===e&&(e=function(t){return E(new Error("Promise does not support operation: "+t))}),void 0===n&&(n=function(){return{state:"unknown"}});var r=tt(y.prototype);if(r.promiseDispatch=function(n,i,o){var s;try{s=t[i]?t[i].apply(r,o):e.call(r,i,o)}catch(u){s=E(u)}n&&n(s)},r.inspect=n,n){var i=n();"rejected"===i.state&&(r.exception=i.reason),r.valueOf=function(){var t=n();return"pending"===t.state||"rejected"===t.state?r:t.value}}return r}function v(t,e,n,r){return l(t).then(e,n,r)}function m(t){if(g(t)){var e=t.inspect();if("fulfilled"===e.state)return e.value}return t}function g(t){return t instanceof y}function w(t){return n(t)&&"function"==typeof t.then}function b(t){return g(t)&&"pending"===t.inspect().state}function _(t){return!g(t)||"fulfilled"===t.inspect().state}function k(t){return g(t)&&"rejected"===t.inspect().state}function j(){ot.length=0,st.length=0,at||(at=!0)}function x(t,n){at&&("object"==typeof e&&"function"==typeof e.emit&&l.nextTick.runAfter(function(){-1!==Y(st,t)&&(e.emit("unhandledRejection",n,t),ut.push(t))}),st.push(t),n&&"undefined"!=typeof n.stack?ot.push(n.stack):ot.push("(no stack) "+n))}function T(t){if(at){var n=Y(st,t);-1!==n&&("object"==typeof e&&"function"==typeof e.emit&&l.nextTick.runAfter(function(){var r=Y(ut,t);-1!==r&&(e.emit("rejectionHandled",ot[n],t),ut.splice(r,1))}),st.splice(n,1),ot.splice(n,1))}}function E(t){var e=y({when:function(e){return e&&T(this),e?e(t):this}},function(){return this},function(){return{state:"rejected",reason:t}});return x(e,t),e}function U(t){return y({when:function(){return t},get:function(e){return t[e]},set:function(e,n){t[e]=n},"delete":function(e){delete t[e]},post:function(e,n){return null===e||void 0===e?t.apply(void 0,n):t[e].apply(t,n)},apply:function(e,n){return t.apply(e,n)},keys:function(){return nt(t)}},void 0,function(){return{state:"fulfilled",value:t}})}function R(t){var e=p();return l.nextTick(function(){try{t.then(e.resolve,e.reject,e.notify)}catch(n){e.reject(n)}}),e.promise}function A(t){return y({isDef:function(){}},function(e,n){return L(t,e,n)},function(){return l(t).inspect()})}function O(t,e,n){return l(t).spread(e,n)}function P(t){return function(){function e(t,e){var s;if("undefined"==typeof StopIteration){try{s=n[t](e)}catch(u){return E(u)}return s.done?l(s.value):v(s.value,i,o)}try{s=n[t](e)}catch(u){return r(u)?l(u.value):E(u)}return v(s,i,o)}var n=t.apply(this,arguments),i=e.bind(e,"next"),o=e.bind(e,"throw");return i()}}function S(t){l.done(l.async(t)())}function I(t){throw new $(t)}function q(t){return function(){return O([this,D(arguments)],function(e,n){return t.apply(e,n)})}}function L(t,e,n){return l(t).dispatch(e,n)}function D(t){return v(t,function(t){var e=0,n=p();return W(t,function(r,i,o){var s;g(i)&&"fulfilled"===(s=i.inspect()).state?t[o]=s.value:(++e,v(i,function(r){t[o]=r,0===--e&&n.resolve(t)},n.reject,function(t){n.notify({index:o,value:t})}))},void 0),0===e&&n.resolve(t),n.promise})}function C(t){if(0===t.length)return l.resolve();var e=l.defer(),n=0;return W(t,function(r,i,o){function s(t){e.resolve(t)}function u(){n--,0===n&&e.reject(new Error("Can't get fulfillment value from any promise, all promises were rejected."))}function a(t){e.notify({index:o,value:t})}var c=t[o];n++,v(c,s,u,a)},void 0),e.promise}function N(t){return v(t,function(t){return t=Z(t,l),v(D(Z(t,function(t){return v(t,X,X)})),function(){return t})})}function F(t){return l(t).allSettled()}function B(t,e){return l(t).then(void 0,void 0,e)}function H(t,e){return l(t).nodeify(e)}var Q=!1;try{throw new Error}catch(G){Q=!!G.stack}var M,$,J=c(),X=function(){},V=function(){function t(){for(var t,e;r.next;)r=r.next,t=r.task,r.task=void 0,e=r.domain,e&&(r.domain=void 0,e.enter()),n(t,e);for(;a.length;)t=a.pop(),n(t);o=!1}function n(e,n){try{e()}catch(r){if(u)throw n&&n.exit(),setTimeout(t,0),n&&n.enter(),r;setTimeout(function(){throw r},0)}n&&n.exit()}var r={task:void 0,next:null},i=r,o=!1,s=void 0,u=!1,a=[];if(V=function(t){i=i.next={task:t,domain:u&&e.domain,next:null},o||(o=!0,s())},"object"==typeof e&&"[object process]"===e.toString()&&e.nextTick)u=!0,s=function(){e.nextTick(t)};else if("function"==typeof setImmediate)s="undefined"!=typeof window?setImmediate.bind(window,t):function(){setImmediate(t)};else if("undefined"!=typeof MessageChannel){var c=new MessageChannel;c.port1.onmessage=function(){s=f,c.port1.onmessage=t,t()};var f=function(){c.port2.postMessage(0)};s=function(){setTimeout(t,0),f()}}else s=function(){setTimeout(t,0)};return V.runAfter=function(t){a.push(t),o||(o=!0,s())},V}(),z=Function.call,K=t(Array.prototype.slice),W=t(Array.prototype.reduce||function(t,e){var n=0,r=this.length;if(1===arguments.length)for(;;){if(n in this){e=this[n++];break}if(++n>=r)throw new TypeError}for(;r>n;n++)n in this&&(e=t(e,this[n],n));return e}),Y=t(Array.prototype.indexOf||function(t){for(var e=0;e<this.length;e++)if(this[e]===t)return e;return-1}),Z=t(Array.prototype.map||function(t,e){var n=this,r=[];return W(n,function(i,o,s){r.push(t.call(e,o,s,n))},void 0),r}),tt=Object.create||function(t){function e(){}return e.prototype=t,new e},et=t(Object.prototype.hasOwnProperty),nt=Object.keys||function(t){var e=[];for(var n in t)et(t,n)&&e.push(n);return e},rt=t(Object.prototype.toString);$="undefined"!=typeof ReturnValue?ReturnValue:function(t){this.value=t};var it="From previous event:";l.resolve=l,l.nextTick=V,l.longStackSupport=!1,"object"==typeof e&&e&&e.env&&e.env.Q_DEBUG&&(l.longStackSupport=!0),l.defer=p,p.prototype.makeNodeResolver=function(){var t=this;return function(e,n){e?t.reject(e):arguments.length>2?t.resolve(K(arguments,1)):t.resolve(n)}},l.Promise=h,l.promise=h,h.race=d,h.all=D,h.reject=E,h.resolve=l,l.passByCopy=function(t){return t},y.prototype.passByCopy=function(){return this},l.join=function(t,e){return l(t).join(e)},y.prototype.join=function(t){return l([this,t]).spread(function(t,e){if(t===e)return t;throw new Error("Can't join: not the same: "+t+" "+e)})},l.race=d,y.prototype.race=function(){return this.then(l.race)},l.makePromise=y,y.prototype.toString=function(){return"[object Promise]"},y.prototype.then=function(t,e,n){function r(e){try{return"function"==typeof t?t(e):e}catch(n){return E(n)}}function o(t){if("function"==typeof e){i(t,u);try{return e(t)}catch(n){return E(n)}}return E(t)}function s(t){return"function"==typeof n?n(t):t}var u=this,a=p(),c=!1;return l.nextTick(function(){u.promiseDispatch(function(t){c||(c=!0,a.resolve(r(t)))},"when",[function(t){c||(c=!0,a.resolve(o(t)))}])}),u.promiseDispatch(void 0,"when",[void 0,function(t){var e,n=!1;try{e=s(t)}catch(r){if(n=!0,!l.onerror)throw r;l.onerror(r)}n||a.notify(e)}]),a.promise},l.tap=function(t,e){return l(t).tap(e)},y.prototype.tap=function(t){return t=l(t),this.then(function(e){return t.fcall(e).thenResolve(e)})},l.when=v,y.prototype.thenResolve=function(t){return this.then(function(){return t})},l.thenResolve=function(t,e){return l(t).thenResolve(e)},y.prototype.thenReject=function(t){return this.then(function(){throw t})},l.thenReject=function(t,e){return l(t).thenReject(e)},l.nearer=m,l.isPromise=g,l.isPromiseAlike=w,l.isPending=b,y.prototype.isPending=function(){return"pending"===this.inspect().state},l.isFulfilled=_,y.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},l.isRejected=k,y.prototype.isRejected=function(){return"rejected"===this.inspect().state};var ot=[],st=[],ut=[],at=!0;l.resetUnhandledRejections=j,l.getUnhandledReasons=function(){return ot.slice()},l.stopUnhandledRejectionTracking=function(){j(),at=!1},j(),l.reject=E,l.fulfill=U,l.master=A,l.spread=O,y.prototype.spread=function(t,e){return this.all().then(function(e){return t.apply(void 0,e)},e)},l.async=P,l.spawn=S,l["return"]=I,l.promised=q,l.dispatch=L,y.prototype.dispatch=function(t,e){var n=this,r=p();return l.nextTick(function(){n.promiseDispatch(r.resolve,t,e)}),r.promise},l.get=function(t,e){return l(t).dispatch("get",[e])},y.prototype.get=function(t){return this.dispatch("get",[t])},l.set=function(t,e,n){return l(t).dispatch("set",[e,n])},y.prototype.set=function(t,e){return this.dispatch("set",[t,e])},l.del=l["delete"]=function(t,e){return l(t).dispatch("delete",[e])},y.prototype.del=y.prototype["delete"]=function(t){return this.dispatch("delete",[t])},l.mapply=l.post=function(t,e,n){return l(t).dispatch("post",[e,n])},y.prototype.mapply=y.prototype.post=function(t,e){return this.dispatch("post",[t,e])},l.send=l.mcall=l.invoke=function(t,e){return l(t).dispatch("post",[e,K(arguments,2)])},y.prototype.send=y.prototype.mcall=y.prototype.invoke=function(t){return this.dispatch("post",[t,K(arguments,1)])},l.fapply=function(t,e){return l(t).dispatch("apply",[void 0,e])},y.prototype.fapply=function(t){return this.dispatch("apply",[void 0,t])},l["try"]=l.fcall=function(t){return l(t).dispatch("apply",[void 0,K(arguments,1)])},y.prototype.fcall=function(){return this.dispatch("apply",[void 0,K(arguments)])},l.fbind=function(t){var e=l(t),n=K(arguments,1);return function(){return e.dispatch("apply",[this,n.concat(K(arguments))])}},y.prototype.fbind=function(){var t=this,e=K(arguments);return function(){return t.dispatch("apply",[this,e.concat(K(arguments))])}},l.keys=function(t){return l(t).dispatch("keys",[])},y.prototype.keys=function(){return this.dispatch("keys",[])},l.all=D,y.prototype.all=function(){return D(this)},l.any=C,y.prototype.any=function(){return C(this)},l.allResolved=f(N,"allResolved","allSettled"),y.prototype.allResolved=function(){return N(this)},l.allSettled=F,y.prototype.allSettled=function(){return this.then(function(t){return D(Z(t,function(t){function e(){return t.inspect()}return t=l(t),t.then(e,e)}))})},l.fail=l["catch"]=function(t,e){return l(t).then(void 0,e)},y.prototype.fail=y.prototype["catch"]=function(t){return this.then(void 0,t)},l.progress=B,y.prototype.progress=function(t){return this.then(void 0,void 0,t)},l.fin=l["finally"]=function(t,e){return l(t)["finally"](e)},y.prototype.fin=y.prototype["finally"]=function(t){return t=l(t),this.then(function(e){return t.fcall().then(function(){return e})},function(e){return t.fcall().then(function(){throw e})})},l.done=function(t,e,n,r){return l(t).done(e,n,r)},y.prototype.done=function(t,n,r){var o=function(t){l.nextTick(function(){if(i(t,s),!l.onerror)throw t;l.onerror(t)})},s=t||n||r?this.then(t,n,r):this;"object"==typeof e&&e&&e.domain&&(o=e.domain.bind(o)),s.then(void 0,o)},l.timeout=function(t,e,n){return l(t).timeout(e,n)},y.prototype.timeout=function(t,e){var n=p(),r=setTimeout(function(){e&&"string"!=typeof e||(e=new Error(e||"Timed out after "+t+" ms"),e.code="ETIMEDOUT"),n.reject(e)},t);return this.then(function(t){clearTimeout(r),n.resolve(t)},function(t){clearTimeout(r),n.reject(t)},n.notify),n.promise},l.delay=function(t,e){return void 0===e&&(e=t,t=void 0),l(t).delay(e)},y.prototype.delay=function(t){return this.then(function(e){var n=p();return setTimeout(function(){n.resolve(e)},t),n.promise})},l.nfapply=function(t,e){return l(t).nfapply(e)},y.prototype.nfapply=function(t){var e=p(),n=K(t);return n.push(e.makeNodeResolver()),this.fapply(n).fail(e.reject),e.promise},l.nfcall=function(t){var e=K(arguments,1);return l(t).nfapply(e)},y.prototype.nfcall=function(){var t=K(arguments),e=p();return t.push(e.makeNodeResolver()),this.fapply(t).fail(e.reject),e.promise},l.nfbind=l.denodeify=function(t){var e=K(arguments,1);return function(){var n=e.concat(K(arguments)),r=p();return n.push(r.makeNodeResolver()),l(t).fapply(n).fail(r.reject),r.promise}},y.prototype.nfbind=y.prototype.denodeify=function(){var t=K(arguments);return t.unshift(this),l.denodeify.apply(void 0,t)},l.nbind=function(t,e){var n=K(arguments,2);return function(){function r(){return t.apply(e,arguments)}var i=n.concat(K(arguments)),o=p();return i.push(o.makeNodeResolver()),l(r).fapply(i).fail(o.reject),o.promise}},y.prototype.nbind=function(){var t=K(arguments,0);return t.unshift(this),l.nbind.apply(void 0,t)},l.nmapply=l.npost=function(t,e,n){return l(t).npost(e,n)},y.prototype.nmapply=y.prototype.npost=function(t,e){var n=K(e||[]),r=p();return n.push(r.makeNodeResolver()),this.dispatch("post",[t,n]).fail(r.reject),r.promise},l.nsend=l.nmcall=l.ninvoke=function(t,e){var n=K(arguments,2),r=p();return n.push(r.makeNodeResolver()),l(t).dispatch("post",[e,n]).fail(r.reject),r.promise},y.prototype.nsend=y.prototype.nmcall=y.prototype.ninvoke=function(t){var e=K(arguments,1),n=p();return e.push(n.makeNodeResolver()),this.dispatch("post",[t,e]).fail(n.reject),n.promise},l.nodeify=H,y.prototype.nodeify=function(t){return t?void this.then(function(e){l.nextTick(function(){t(null,e)})},function(e){l.nextTick(function(){t(e)})}):this},l.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var ct=c();return l})}).call(this,e("_process"))},{_process:2}],2:[function(t,e,n){function r(){f=!1,u.length?c=u.concat(c):l=-1,c.length&&i()}function i(){if(!f){var t=setTimeout(r);f=!0;for(var e=c.length;e;){for(u=c,c=[];++l<e;)u&&u[l].run();l=-1,e=c.length}u=null,f=!1,clearTimeout(t)}}function o(t,e){this.fun=t,this.array=e}function s(){}var u,a=e.exports={},c=[],f=!1,l=-1;a.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new o(t,e)),1!==c.length||f||setTimeout(i,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=s,a.addListener=s,a.once=s,a.off=s,a.removeListener=s,a.removeAllListeners=s,a.emit=s,a.binding=function(t){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(t){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},{}],3:[function(e,n,r){!function(e){function n(){this._events={},this._conf&&i.call(this,this._conf)}function i(t){t&&(this._conf=t,t.delimiter&&(this.delimiter=t.delimiter),t.maxListeners&&(this._events.maxListeners=t.maxListeners),t.wildcard&&(this.wildcard=t.wildcard),t.newListener&&(this.newListener=t.newListener),this.wildcard&&(this.listenerTree={}))}function o(t){this._events={},this.newListener=!1,i.call(this,t)}function s(t,e,n,r){if(!n)return[];var i,o,u,a,c,f,l,p=[],h=e.length,d=e[r],y=e[r+1];if(r===h&&n._listeners){if("function"==typeof n._listeners)return t&&t.push(n._listeners),[n];for(i=0,o=n._listeners.length;o>i;i++)t&&t.push(n._listeners[i]);return[n]}if("*"===d||"**"===d||n[d]){if("*"===d){for(u in n)"_listeners"!==u&&n.hasOwnProperty(u)&&(p=p.concat(s(t,e,n[u],r+1)));return p}if("**"===d){l=r+1===h||r+2===h&&"*"===y,l&&n._listeners&&(p=p.concat(s(t,e,n,h)));for(u in n)"_listeners"!==u&&n.hasOwnProperty(u)&&("*"===u||"**"===u?(n[u]._listeners&&!l&&(p=p.concat(s(t,e,n[u],h))),p=p.concat(s(t,e,n[u],r))):p=u===y?p.concat(s(t,e,n[u],r+2)):p.concat(s(t,e,n[u],r)));return p}p=p.concat(s(t,e,n[d],r+1))}if(a=n["*"],a&&s(t,e,a,r+1),c=n["**"])if(h>r){c._listeners&&s(t,e,c,h);for(u in c)"_listeners"!==u&&c.hasOwnProperty(u)&&(u===y?s(t,e,c[u],r+2):u===d?s(t,e,c[u],r+1):(f={},f[u]=c[u],s(t,e,{"**":f},r+1)))}else c._listeners?s(t,e,c,h):c["*"]&&c["*"]._listeners&&s(t,e,c["*"],h);return p}function u(t,e){t="string"==typeof t?t.split(this.delimiter):t.slice();for(var n=0,r=t.length;r>n+1;n++)if("**"===t[n]&&"**"===t[n+1])return;for(var i=this.listenerTree,o=t.shift();o;){if(i[o]||(i[o]={}),i=i[o],0===t.length){if(i._listeners){if("function"==typeof i._listeners)i._listeners=[i._listeners,e];else if(a(i._listeners)&&(i._listeners.push(e),!i._listeners.warned)){var s=c;"undefined"!=typeof this._events.maxListeners&&(s=this._events.maxListeners),s>0&&i._listeners.length>s&&(i._listeners.warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",i._listeners.length),console.trace())}}else i._listeners=e;return!0}o=t.shift()}return!0}var a=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},c=10;o.prototype.delimiter=".",o.prototype.setMaxListeners=function(t){this._events||n.call(this),this._events.maxListeners=t,this._conf||(this._conf={}),this._conf.maxListeners=t},o.prototype.event="",o.prototype.once=function(t,e){return this.many(t,1,e),this},o.prototype.many=function(t,e,n){function r(){0===--e&&i.off(t,r),n.apply(this,arguments)}var i=this;if("function"!=typeof n)throw new Error("many only accepts instances of Function");return r._origin=n,this.on(t,r),i},o.prototype.emit=function(){this._events||n.call(this);var t=arguments[0];if("newListener"===t&&!this.newListener&&!this._events.newListener)return!1;if(this._all){for(var e=arguments.length,r=new Array(e-1),i=1;e>i;i++)r[i-1]=arguments[i];for(i=0,e=this._all.length;e>i;i++)this.event=t,this._all[i].apply(this,r)}if("error"===t&&!(this._all||this._events.error||this.wildcard&&this.listenerTree.error))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");var o;if(this.wildcard){o=[];var u="string"==typeof t?t.split(this.delimiter):t.slice();s.call(this,o,u,this.listenerTree,0)}else o=this._events[t];if("function"==typeof o){if(this.event=t,1===arguments.length)o.call(this);else if(arguments.length>1)switch(arguments.length){case 2:o.call(this,arguments[1]);break;case 3:o.call(this,arguments[1],arguments[2]);break;default:for(var e=arguments.length,r=new Array(e-1),i=1;e>i;i++)r[i-1]=arguments[i];o.apply(this,r)}return!0}if(o){for(var e=arguments.length,r=new Array(e-1),i=1;e>i;i++)r[i-1]=arguments[i];for(var a=o.slice(),i=0,e=a.length;e>i;i++)this.event=t,a[i].apply(this,r);return a.length>0||!!this._all}return!!this._all},o.prototype.on=function(t,e){if("function"==typeof t)return this.onAny(t),this;if("function"!=typeof e)throw new Error("on only accepts instances of Function");if(this._events||n.call(this),this.emit("newListener",t,e),this.wildcard)return u.call(this,t,e),this;if(this._events[t]){if("function"==typeof this._events[t])this._events[t]=[this._events[t],e];else if(a(this._events[t])&&(this._events[t].push(e),!this._events[t].warned)){var r=c;"undefined"!=typeof this._events.maxListeners&&(r=this._events.maxListeners),r>0&&this._events[t].length>r&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),console.trace())}}else this._events[t]=e;return this},o.prototype.onAny=function(t){if("function"!=typeof t)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),this._all.push(t),this},o.prototype.addListener=o.prototype.on,o.prototype.off=function(t,e){if("function"!=typeof e)throw new Error("removeListener only takes instances of Function");var n,r=[];if(this.wildcard){var i="string"==typeof t?t.split(this.delimiter):t.slice();r=s.call(this,null,i,this.listenerTree,0)}else{if(!this._events[t])return this;n=this._events[t],r.push({_listeners:n})}for(var o=0;o<r.length;o++){var u=r[o];if(n=u._listeners,a(n)){for(var c=-1,f=0,l=n.length;l>f;f++)if(n[f]===e||n[f].listener&&n[f].listener===e||n[f]._origin&&n[f]._origin===e){c=f;break}if(0>c)continue;return this.wildcard?u._listeners.splice(c,1):this._events[t].splice(c,1),0===n.length&&(this.wildcard?delete u._listeners:delete this._events[t]),this}(n===e||n.listener&&n.listener===e||n._origin&&n._origin===e)&&(this.wildcard?delete u._listeners:delete this._events[t])}return this},o.prototype.offAny=function(t){var e,n=0,r=0;if(t&&this._all&&this._all.length>0){for(e=this._all,n=0,r=e.length;r>n;n++)if(t===e[n])return e.splice(n,1),this}else this._all=[];return this},o.prototype.removeListener=o.prototype.off,o.prototype.removeAllListeners=function(t){if(0===arguments.length)return!this._events||n.call(this),this;if(this.wildcard)for(var e="string"==typeof t?t.split(this.delimiter):t.slice(),r=s.call(this,null,e,this.listenerTree,0),i=0;i<r.length;i++){var o=r[i];o._listeners=null}else{if(!this._events[t])return this;this._events[t]=null}return this},o.prototype.listeners=function(t){if(this.wildcard){var e=[],r="string"==typeof t?t.split(this.delimiter):t.slice();return s.call(this,e,r,this.listenerTree,0),e}return this._events||n.call(this),this._events[t]||(this._events[t]=[]),a(this._events[t])||(this._events[t]=[this._events[t]]),this._events[t]},o.prototype.listenersAny=function(){return this._all?this._all:[]},"function"==typeof t&&t.amd?t(function(){return o}):"object"==typeof r?r.EventEmitter2=o:window.EventEmitter2=o}()},{}],4:[function(t,e,n){e.exports=function(t){if(!t||"object"!=typeof t)return t;var e;if(i(t)){var n=t.length;e=Array(n);for(var o=0;n>o;o++)e[o]=t[o]}else{var s=r(t);e={};for(var o=0,u=s.length;u>o;o++){var a=s[o];e[a]=t[a]}}return e};var r=Object.keys||function(t){var e=[];for(var n in t)({}).hasOwnProperty.call(t,n)&&e.push(n);return e},i=Array.isArray||function(t){return"[object Array]"==={}.toString.call(t)}},{}],5:[function(t,e,n){!function(){"use strict";function t(t){if("string"!=typeof t&&(t=t.toString()),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function e(t){return"string"!=typeof t&&(t=t.toString()),t}function n(t){this.map={},t instanceof n?t.forEach(function(t,e){this.append(e,t)},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function r(t){return t.bodyUsed?Promise.reject(new TypeError("Already read")):void(t.bodyUsed=!0)}function i(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function o(t){var e=new FileReader;return e.readAsArrayBuffer(t),i(e)}function s(t){var e=new FileReader;return e.readAsText(t),i(e)}function u(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,"string"==typeof t)this._bodyText=t;else if(h.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(h.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else{if(t)throw new Error("unsupported BodyInit type");this._bodyText=""}},h.blob?(this.blob=function(){var t=r(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(o)},this.text=function(){var t=r(this);if(t)return t;if(this._bodyBlob)return s(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var t=r(this);return t?t:Promise.resolve(this._bodyText)},h.formData&&(this.formData=function(){return this.text().then(f)}),this.json=function(){return this.text().then(JSON.parse)},this}function a(t){var e=t.toUpperCase();return d.indexOf(e)>-1?e:t}function c(t,e){if(e=e||{},this.url=t,this.credentials=e.credentials||"omit",this.headers=new n(e.headers),this.method=a(e.method||"GET"),this.mode=e.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&e.body)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(e.body)}function f(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(i))}}),e}function l(t){var e=new n,r=t.getAllResponseHeaders().trim().split("\n");return r.forEach(function(t){var n=t.trim().split(":"),r=n.shift().trim(),i=n.join(":").trim();e.append(r,i)}),e}function p(t,e){e||(e={}),this._initBody(t),this.type="default",this.url=null,this.status=e.status,this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText,this.headers=e.headers instanceof n?e.headers:new n(e.headers),this.url=e.url||""}if(!self.fetch){n.prototype.append=function(n,r){n=t(n),r=e(r);var i=this.map[n];i||(i=[],this.map[n]=i),i.push(r)},n.prototype["delete"]=function(e){delete this.map[t(e)]},n.prototype.get=function(e){var n=this.map[t(e)];return n?n[0]:null},n.prototype.getAll=function(e){return this.map[t(e)]||[]},n.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},n.prototype.set=function(n,r){this.map[t(n)]=[e(r)]},n.prototype.forEach=function(t,e){Object.getOwnPropertyNames(this.map).forEach(function(n){this.map[n].forEach(function(r){t.call(e,r,n,this)},this)},this)};var h={blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in self},d=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];u.call(c.prototype),u.call(p.prototype),self.Headers=n,self.Request=c,self.Response=p,self.fetch=function(t,e){var n;return n=c.prototype.isPrototypeOf(t)&&!e?t:new c(t,e),new Promise(function(t,e){function r(){return"responseURL"in i?i.responseURL:/^X-Request-URL:/m.test(i.getAllResponseHeaders())?i.getResponseHeader("X-Request-URL"):void 0}var i=new XMLHttpRequest;i.onload=function(){var n=1223===i.status?204:i.status;if(100>n||n>599)return void e(new TypeError("Network request failed"));var o={status:n,statusText:i.statusText,headers:l(i),url:r()},s="response"in i?i.response:i.responseText;t(new p(s,o))},i.onerror=function(){e(new TypeError("Network request failed"))},i.open(n.method,n.url,!0),"include"===n.credentials&&(i.withCredentials=!0),"responseType"in i&&h.blob&&(i.responseType="blob"),n.headers.forEach(function(t,e){i.setRequestHeader(e,t)}),i.send("undefined"==typeof n._bodyInit?null:n._bodyInit)})},self.fetch.polyfill=!0}}()},{}],6:[function(t,e,n){"use strict";t("whatwg-fetch");var r=t("Q"),i=t("eventemitter2").EventEmitter2,o=t("shallow-copy");e.exports=function(t,e,n){var s=t||"",u=e||!1,a=[],c={},f=function(){},l=function(t){return t},p=function(t){var e=[].slice.call(arguments,1);return r.all(a.map(function(n){return(n[t]||f).apply(n,e)}))},h=function(t){var e=[].slice.call(arguments,0),n=function(t,i){var o=a[t];return o?r((o&&o[i]||f).apply(o,[].slice.call(arguments,2))).then(function(r){return null!==r&&void 0!==r?r:n.apply(null,[t+1].concat(e))}):r(null)};return n.apply(null,[0].concat(e))},d=function(t,e){var n=[].slice.call(arguments,2);return a.reduce(function(e,r){return(r[t]||l).apply(r,[e].concat(n))},e)},y=function(t){return t.match(/^(http[s]?:\/\/)([^/]+)($|\/.*)/)},v=function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e.join("&")},m=function(t){if(!(this instanceof m))return new m(t);if(!t)return this.projectUrl=s+"/project",this.projectsUrl=s+"/project",this.projectId=!1,void(this.query="");this.projectsUrl="",this.projectUrl="",this.projectId="",this.formUrl="",this.formsUrl="",this.formId="",this.submissionsUrl="",this.submissionUrl="",this.submissionId="",this.actionsUrl="",this.actionId="",this.actionUrl="",this.query="",0!==t.indexOf("http")&&0!==t.indexOf("//")&&(s=s?s:window.location.href.match(/http[s]?:\/\/api./)[0],t=s+t);var e=y(t),n=[],r=e[1]+e[2];t=e.length>3?e[3]:"";var i=t.split("?");if(i.length>1&&(t=i[0],this.query="?"+i[1]),-1!==t.search(/(^|\/)(form|project)($|\/)/)){var o=function(e,r){this[e+"sUrl"]=r+"/"+e;var i=new RegExp("/"+e+"/([^/]+)");return-1!==t.search(i)&&(n=t.match(i),this[e+"Url"]=n?r+n[0]:"",this[e+"Id"]=n.length>1?n[1]:"",r+=n[0]),r}.bind(this),u=function(t,e,n){for(var r in t){var i=t[r];if(i instanceof Array)u(i,e,!0);else{var s=o(i,e);e=n?e:s}}};u(["project","form",["submission","action"]],r),this.projectId||(this.projectUrl=r,this.projectId=e.length>2?e[2].split(".")[0]:"")}else{this.projectUrl=r,this.projectId=e.length>2?e[2].split(".")[0]:"";var a=new RegExp("/(submission|action)($|/.*)"),c=t.match(a);this.pathType=c&&c.length>1?c[1]:"",t=t.replace(a,""),t=t.replace(/\/$/,""),this.formsUrl=r+"/form",this.formUrl=r+t,this.formId=t.replace(/^\/+|\/+$/g,"");var f=["submission","action"];for(var l in f){var p=f[l];this[p+"sUrl"]=r+t+"/"+p,this.pathType===p&&c.length>2&&c[2]&&(this[p+"Id"]=c[2].replace(/^\/+|\/+$/g,""),this[p+"Url"]=r+t+c[0])}}},g=function(t){var e=t+"Id",n=t+"Url";return function(i,o){return"object"==typeof i&&(i="?"+v(i.params)),this[e]?this.makeRequest(t,this[n]+this.query,"get",null,o):r.reject("Missing "+e)}},w=function(t){var e=t+"Id",n=t+"Url";
return function(r,i){var o=this[e]?"put":"post",s=this[e]?this[n]:this[t+"sUrl"];return c={},this.makeRequest(t,s+this.query,o,r,i)}},b=function(t){var e=t+"Id",n=t+"Url";return function(i){return this[e]||r.reject("Nothing to delete"),c={},this.makeRequest(t,this[n],"delete",null,i)}},_=function(t){var e=t+"Url";return function(n,r){return n=n||"","object"==typeof n&&(n="?"+v(n.params)),this.makeRequest(t,this[e]+n,"get",null,r)}};return m.prototype.makeRequest=function(t,e,n,r,i){var o=this;n=(n||"GET").toUpperCase(),i&&"object"==typeof i||(i={});var s={formio:o,type:t,url:e,method:n,data:r,opts:i},u=p("preRequest",s).then(function(){return h("request",s).then(function(t){return null===t||void 0===t?m.request(e,n,r):t})});return d("wrapRequestPromise",u,s)},m.prototype.loadProject=g("project"),m.prototype.saveProject=w("project"),m.prototype.deleteProject=b("project"),m.prototype.loadForm=g("form"),m.prototype.saveForm=w("form"),m.prototype.deleteForm=b("form"),m.prototype.loadForms=_("forms"),m.prototype.loadSubmission=g("submission"),m.prototype.saveSubmission=w("submission"),m.prototype.deleteSubmission=b("submission"),m.prototype.loadSubmissions=_("submissions"),m.prototype.loadAction=g("action"),m.prototype.saveAction=w("action"),m.prototype.deleteAction=b("action"),m.prototype.loadActions=_("actions"),m.prototype.availableActions=function(){return this.makeRequest("availableActions",this.formUrl+"/actions")},m.prototype.actionInfo=function(t){return this.makeRequest("actionInfo",this.formUrl+"/actions/"+t)},m.makeStaticRequest=function(t,e,n){e=(e||"GET").toUpperCase();var r={url:t,method:e,data:n},i=p("preStaticRequest",r).then(function(){return h("staticRequest",r).then(function(r){return null===r||void 0===r?m.request(t,e,n):r})});return d("wrapStaticRequestPromise",i,r)},m.loadProjects=function(){return this.makeStaticRequest(s+"/project")},m.request=function(t,e,n){if(!t)return r.reject("No url provided");e=(e||"GET").toUpperCase();var i=btoa(t);return r().then(function(){return"GET"===e&&c.hasOwnProperty(i)?c[i]:r().then(function(){var r=new Headers({Accept:"application/json","Content-type":"application/json; charset=UTF-8"}),i=m.getToken();i&&r.append("x-jwt-token",i);var o={method:e,headers:r,mode:"cors"};return n&&(o.body=JSON.stringify(n)),fetch(t,o)})["catch"](function(t){throw t.message="Could not connect to API server ("+t.message+")",t.networkError=!0,t}).then(function(t){if(t.ok){var e=t.headers.get("x-jwt-token");return t.status>=200&&t.status<300&&e&&""!==e&&m.setToken(e),204===t.status?{}:(-1!==t.headers.get("content-type").indexOf("application/json")?t.json():t.text()).then(function(e){var n=t.headers.get("content-range");if(n&&"object"==typeof e){if(n=n.split("/"),"*"!==n[0]){var r=n[0].split("-");e.skip=Number(r[0]),e.limit=r[1]-r[0]+1}e.serverCount="*"===n[1]?n[1]:Number(n[1])}return e})}return 440===t.status&&m.setToken(null),(-1!==t.headers.get("content-type").indexOf("application/json")?t.json():t.text()).then(function(t){throw t})})["catch"](function(t){throw delete c[i],t})}).then(function(t){if("GET"===e&&(c[i]=r(t)),Array.isArray(t)){var n=t.map(o);return n.skip=t.skip,n.limit=t.limit,n.serverCount=t.serverCount,n}return o(t)})},m.setToken=function(t){if(t=t||"",t!==this.token){if(this.token=t,!t)return m.setUser(null),localStorage.removeItem("formioToken");localStorage.setItem("formioToken",t),m.currentUser()}},m.getToken=function(){if(this.token)return this.token;var t=localStorage.getItem("formioToken")||"";return this.token=t,t},m.setUser=function(t){return t?void localStorage.setItem("formioUser",JSON.stringify(t)):(this.setToken(null),localStorage.removeItem("formioUser"))},m.getUser=function(){return JSON.parse(localStorage.getItem("formioUser")||null)},m.setBaseUrl=function(t,e){s=t,u=e,m.baseUrl=s},m.clearCache=function(){c={}},m.currentUser=function(){var t=this.getUser();if(t)return r(t);var e=this.getToken();return e?this.makeStaticRequest(s+"/current").then(function(t){return m.setUser(t),t}):r(null)},m.logout=function(){return this.makeStaticRequest(s+"/logout")["finally"](function(){this.setToken(null),this.setUser(null),m.clearCache()}.bind(this))},m.fieldData=function(t,e){if(!t)return"";if(-1!==e.key.indexOf(".")){for(var n=t,r=e.key.split("."),i="",o=0;o<r.length;o++){if(i=r[o],n.hasOwnProperty("_id")&&(n=n.data),!n.hasOwnProperty(i))return;i===r[r.length-1]&&e.multiple&&!Array.isArray(n[i])&&(n[i]=[n[i]]),n=n[i]}return n}return e.multiple&&!Array.isArray(t[e.key])&&(t[e.key]=[t[e.key]]),t[e.key]},m.events=new i({wildcard:!1,maxListeners:0}),m.registerPlugin=function(t,e){a.push(t),a.sort(function(t,e){return(e.priority||0)-(t.priority||0)}),t.__name=e,(t.init||f).call(t,m)},m.getPlugin=function(t){return a.reduce(function(e,n){return e?e:n.__name===t?n:void 0},null)},m}},{Q:1,eventemitter2:3,"shallow-copy":4,"whatwg-fetch":5}]},{},[6])(6)});