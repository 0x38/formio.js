!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.Formio=t()}}(function(){var t;return function e(t,n,r){function o(s,a){if(!n[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var f=n[s]={exports:{}};t[s][0].call(f.exports,function(e){var n=t[s][1][e];return o(n?n:e)},f,f.exports,e,t,n,r)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(t,e,n){"use strict";function r(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function o(){}var i=Object.prototype.hasOwnProperty,s="function"!=typeof Object.create?"~":!1;o.prototype._events=void 0,o.prototype.eventNames=function(){var t,e=this._events,n=[];if(!e)return n;for(t in e)i.call(e,t)&&n.push(s?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},o.prototype.listeners=function(t,e){var n=s?s+t:t,r=this._events&&this._events[n];if(e)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var o=0,i=r.length,a=new Array(i);i>o;o++)a[o]=r[o].fn;return a},o.prototype.emit=function(t,e,n,r,o,i){var a=s?s+t:t;if(!this._events||!this._events[a])return!1;var u,c,f=this._events[a],l=arguments.length;if("function"==typeof f.fn){switch(f.once&&this.removeListener(t,f.fn,void 0,!0),l){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,e),!0;case 3:return f.fn.call(f.context,e,n),!0;case 4:return f.fn.call(f.context,e,n,r),!0;case 5:return f.fn.call(f.context,e,n,r,o),!0;case 6:return f.fn.call(f.context,e,n,r,o,i),!0}for(c=1,u=new Array(l-1);l>c;c++)u[c-1]=arguments[c];f.fn.apply(f.context,u)}else{var p,h=f.length;for(c=0;h>c;c++)switch(f[c].once&&this.removeListener(t,f[c].fn,void 0,!0),l){case 1:f[c].fn.call(f[c].context);break;case 2:f[c].fn.call(f[c].context,e);break;case 3:f[c].fn.call(f[c].context,e,n);break;default:if(!u)for(p=1,u=new Array(l-1);l>p;p++)u[p-1]=arguments[p];f[c].fn.apply(f[c].context,u)}}return!0},o.prototype.on=function(t,e,n){var o=new r(e,n||this),i=s?s+t:t;return this._events||(this._events=s?{}:Object.create(null)),this._events[i]?this._events[i].fn?this._events[i]=[this._events[i],o]:this._events[i].push(o):this._events[i]=o,this},o.prototype.once=function(t,e,n){var o=new r(e,n||this,!0),i=s?s+t:t;return this._events||(this._events=s?{}:Object.create(null)),this._events[i]?this._events[i].fn?this._events[i]=[this._events[i],o]:this._events[i].push(o):this._events[i]=o,this},o.prototype.removeListener=function(t,e,n,r){var o=s?s+t:t;if(!this._events||!this._events[o])return this;var i=this._events[o],a=[];if(e)if(i.fn)(i.fn!==e||r&&!i.once||n&&i.context!==n)&&a.push(i);else for(var u=0,c=i.length;c>u;u++)(i[u].fn!==e||r&&!i[u].once||n&&i[u].context!==n)&&a.push(i[u]);return a.length?this._events[o]=1===a.length?a[0]:a:delete this._events[o],this},o.prototype.removeAllListeners=function(t){return this._events?(t?delete this._events[s?s+t:t]:this._events=s?{}:Object.create(null),this):this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prototype.setMaxListeners=function(){return this},o.prefixed=s,"undefined"!=typeof e&&(e.exports=o)},{}],2:[function(e,n,r){(function(e){!function(e,r,o){r[e]=r[e]||o(),"undefined"!=typeof n&&n.exports?n.exports=r[e]:"function"==typeof t&&t.amd&&t(function(){return r[e]})}("Promise","undefined"!=typeof e?e:this,function(){"use strict";function t(t,e){p.add(t,e),l||(l=d(p.drain))}function e(t){var e,n=typeof t;return null==t||"object"!=n&&"function"!=n||(e=t.then),"function"==typeof e?e:!1}function n(){for(var t=0;t<this.chain.length;t++)r(this,1===this.state?this.chain[t].success:this.chain[t].failure,this.chain[t]);this.chain.length=0}function r(t,n,r){var o,i;try{n===!1?r.reject(t.msg):(o=n===!0?t.msg:n.call(void 0,t.msg),o===r.promise?r.reject(TypeError("Promise-chain cycle")):(i=e(o))?i.call(o,r.resolve,r.reject):r.resolve(o))}catch(s){r.reject(s)}}function o(r){var s,u=this;if(!u.triggered){u.triggered=!0,u.def&&(u=u.def);try{(s=e(r))?t(function(){var t=new a(u);try{s.call(r,function(){o.apply(t,arguments)},function(){i.apply(t,arguments)})}catch(e){i.call(t,e)}}):(u.msg=r,u.state=1,u.chain.length>0&&t(n,u))}catch(c){i.call(new a(u),c)}}}function i(e){var r=this;r.triggered||(r.triggered=!0,r.def&&(r=r.def),r.msg=e,r.state=2,r.chain.length>0&&t(n,r))}function s(t,e,n,r){for(var o=0;o<e.length;o++)!function(o){t.resolve(e[o]).then(function(t){n(o,t)},r)}(o)}function a(t){this.def=t,this.triggered=!1}function u(t){this.promise=t,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function c(e){if("function"!=typeof e)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var r=new u(this);this.then=function(e,o){var i={success:"function"==typeof e?e:!0,failure:"function"==typeof o?o:!1};return i.promise=new this.constructor(function(t,e){if("function"!=typeof t||"function"!=typeof e)throw TypeError("Not a function");i.resolve=t,i.reject=e}),r.chain.push(i),0!==r.state&&t(n,r),i.promise},this["catch"]=function(t){return this.then(void 0,t)};try{e.call(void 0,function(t){o.call(r,t)},function(t){i.call(r,t)})}catch(s){i.call(r,s)}}var f,l,p,h=Object.prototype.toString,d="undefined"!=typeof setImmediate?function(t){return setImmediate(t)}:setTimeout;try{Object.defineProperty({},"x",{}),f=function(t,e,n,r){return Object.defineProperty(t,e,{value:n,writable:!0,configurable:r!==!1})}}catch(y){f=function(t,e,n){return t[e]=n,t}}p=function(){function t(t,e){this.fn=t,this.self=e,this.next=void 0}var e,n,r;return{add:function(o,i){r=new t(o,i),n?n.next=r:e=r,n=r,r=void 0},drain:function(){var t=e;for(e=n=l=void 0;t;)t.fn.call(t.self),t=t.next}}}();var v=f({},"constructor",c,!1);return c.prototype=v,f(v,"__NPO__",0,!1),f(c,"resolve",function(t){var e=this;return t&&"object"==typeof t&&1===t.__NPO__?t:new e(function(e,n){if("function"!=typeof e||"function"!=typeof n)throw TypeError("Not a function");e(t)})}),f(c,"reject",function(t){return new this(function(e,n){if("function"!=typeof e||"function"!=typeof n)throw TypeError("Not a function");n(t)})}),f(c,"all",function(t){var e=this;return"[object Array]"!=h.call(t)?e.reject(TypeError("Not an array")):0===t.length?e.resolve([]):new e(function(n,r){if("function"!=typeof n||"function"!=typeof r)throw TypeError("Not a function");var o=t.length,i=Array(o),a=0;s(e,t,function(t,e){i[t]=e,++a===o&&n(i)},r)})}),f(c,"race",function(t){var e=this;return"[object Array]"!=h.call(t)?e.reject(TypeError("Not an array")):new e(function(n,r){if("function"!=typeof n||"function"!=typeof r)throw TypeError("Not a function");s(e,t,function(t,e){n(e)},r)})}),c})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(t,e,n){e.exports=function(t){if(!t||"object"!=typeof t)return t;var e;if(o(t)){var n=t.length;e=Array(n);for(var i=0;n>i;i++)e[i]=t[i]}else{var s=r(t);e={};for(var i=0,a=s.length;a>i;i++){var u=s[i];e[u]=t[u]}}return e};var r=Object.keys||function(t){var e=[];for(var n in t)({}).hasOwnProperty.call(t,n)&&e.push(n);return e},o=Array.isArray||function(t){return"[object Array]"==={}.toString.call(t)}},{}],4:[function(t,e,n){!function(){"use strict";function t(t){if("string"!=typeof t&&(t=t.toString()),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function e(t){return"string"!=typeof t&&(t=t.toString()),t}function n(t){this.map={},t instanceof n?t.forEach(function(t,e){this.append(e,t)},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function r(t){return t.bodyUsed?Promise.reject(new TypeError("Already read")):void(t.bodyUsed=!0)}function o(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function i(t){var e=new FileReader;return e.readAsArrayBuffer(t),o(e)}function s(t){var e=new FileReader;return e.readAsText(t),o(e)}function a(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,"string"==typeof t)this._bodyText=t;else if(h.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(h.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else{if(t)throw new Error("unsupported BodyInit type");this._bodyText=""}},h.blob?(this.blob=function(){var t=r(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(i)},this.text=function(){var t=r(this);if(t)return t;if(this._bodyBlob)return s(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var t=r(this);return t?t:Promise.resolve(this._bodyText)},h.formData&&(this.formData=function(){return this.text().then(f)}),this.json=function(){return this.text().then(JSON.parse)},this}function u(t){var e=t.toUpperCase();return d.indexOf(e)>-1?e:t}function c(t,e){if(e=e||{},this.url=t,this.credentials=e.credentials||"omit",this.headers=new n(e.headers),this.method=u(e.method||"GET"),this.mode=e.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&e.body)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(e.body)}function f(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(o))}}),e}function l(t){var e=new n,r=t.getAllResponseHeaders().trim().split("\n");return r.forEach(function(t){var n=t.trim().split(":"),r=n.shift().trim(),o=n.join(":").trim();e.append(r,o)}),e}function p(t,e){e||(e={}),this._initBody(t),this.type="default",this.url=null,this.status=e.status,this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText,this.headers=e.headers instanceof n?e.headers:new n(e.headers),this.url=e.url||""}if(!self.fetch){n.prototype.append=function(n,r){n=t(n),r=e(r);var o=this.map[n];o||(o=[],this.map[n]=o),o.push(r)},n.prototype["delete"]=function(e){delete this.map[t(e)]},n.prototype.get=function(e){var n=this.map[t(e)];return n?n[0]:null},n.prototype.getAll=function(e){return this.map[t(e)]||[]},n.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},n.prototype.set=function(n,r){this.map[t(n)]=[e(r)]},n.prototype.forEach=function(t,e){Object.getOwnPropertyNames(this.map).forEach(function(n){this.map[n].forEach(function(r){t.call(e,r,n,this)},this)},this)};var h={blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in self},d=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];a.call(c.prototype),a.call(p.prototype),self.Headers=n,self.Request=c,self.Response=p,self.fetch=function(t,e){var n;return n=c.prototype.isPrototypeOf(t)&&!e?t:new c(t,e),new Promise(function(t,e){function r(){return"responseURL"in o?o.responseURL:/^X-Request-URL:/m.test(o.getAllResponseHeaders())?o.getResponseHeader("X-Request-URL"):void 0}var o=new XMLHttpRequest;o.onload=function(){var n=1223===o.status?204:o.status;if(100>n||n>599)return void e(new TypeError("Network request failed"));var i={status:n,statusText:o.statusText,headers:l(o),url:r()},s="response"in o?o.response:o.responseText;t(new p(s,i))},o.onerror=function(){e(new TypeError("Network request failed"))},o.open(n.method,n.url,!0),"include"===n.credentials&&(o.withCredentials=!0),"responseType"in o&&h.blob&&(o.responseType="blob"),n.headers.forEach(function(t,e){o.setRequestHeader(e,t)}),o.send("undefined"==typeof n._bodyInit?null:n._bodyInit)})},self.fetch.polyfill=!0}}()},{}],5:[function(t,e,n){"use strict";t("whatwg-fetch");var r=t("native-promise-only"),o=t("eventemitter3"),i=t("shallow-copy"),s=t("./providers"),a="https://api.form.io",u=a,c=!1,f=[],l={},p=function(){},h=function(t){return t},d=function(t){var e=[].slice.call(arguments,1);return r.all(f.map(function(n){return(n[t]||p).apply(n,e)}))},y=function(t){var e=[].slice.call(arguments,0),n=function(t,o){var i=f[t];return i?r.resolve((i&&i[o]||p).apply(i,[].slice.call(arguments,2))).then(function(r){return null!==r&&void 0!==r?r:n.apply(null,[t+1].concat(e))}):r.resolve(null)};return n.apply(null,[0].concat(e))},v=function(t,e){var n=[].slice.call(arguments,2);return f.reduce(function(e,r){return(r[t]||h).apply(r,[e].concat(n))},e)},m=function(t){var e="^(http[s]?:\\/\\/)";return e+=a&&0===t.indexOf(a)?"("+a.replace(/^http[s]?:\/\//,"")+")":"([^/]+)",e+="($|\\/.*)",t.match(new RegExp(e))},g=function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e.join("&")},w=function(t){if(!(this instanceof w))return new w(t);if(!t)return this.projectUrl=a+"/project",this.projectsUrl=a+"/project",this.projectId=!1,void(this.query="");this.projectsUrl="",this.projectUrl="",this.projectId="",this.formUrl="",this.formsUrl="",this.formId="",this.submissionsUrl="",this.submissionUrl="",this.submissionId="",this.actionsUrl="",this.actionId="",this.actionUrl="",this.query="",0!==t.indexOf("http")&&0!==t.indexOf("//")&&(a=a?a:window.location.href.match(/http[s]?:\/\/api./)[0],t=a+t);var e=m(t),n=[],r=e[1]+e[2];t=e.length>3?e[3]:"";var o=t.split("?");if(o.length>1&&(t=o[0],this.query="?"+o[1]),-1!==t.search(/(^|\/)(form|project)($|\/)/)){var i=function(e,r){this[e+"sUrl"]=r+"/"+e;var o=new RegExp("/"+e+"/([^/]+)");return-1!==t.search(o)&&(n=t.match(o),this[e+"Url"]=n?r+n[0]:"",this[e+"Id"]=n.length>1?n[1]:"",r+=n[0]),r}.bind(this),s=function(t,e,n){for(var r in t)if(t.hasOwnProperty(r)){var o=t[r];if(o instanceof Array)s(o,e,!0);else{var a=i(o,e);e=n?e:a}}};s(["project","form",["submission","action"]],r),this.projectId||e.length>2&&e[2].split(".").length>2&&(this.projectUrl=r,this.projectId=e[2].split(".")[0])}else{this.projectUrl=r,this.projectId=e.length>2?e[2].split(".")[0]:"";var f=new RegExp("/(submission|action)($|/.*)"),l=t.match(f);this.pathType=l&&l.length>1?l[1]:"",t=t.replace(f,""),t=t.replace(/\/$/,""),this.formsUrl=r+"/form",this.formUrl=r+t,this.formId=t.replace(/^\/+|\/+$/g,"");var p=["submission","action"];for(var h in p)if(p.hasOwnProperty(h)){var d=p[h];this[d+"sUrl"]=r+t+"/"+d,this.pathType===d&&l.length>2&&l[2]&&(this[d+"Id"]=l[2].replace(/^\/+|\/+$/g,""),this[d+"Url"]=r+t+l[0])}}c||(u=this.projectUrl)},b=function(t){var e=t+"Id",n=t+"Url";return function(o,i){return o&&"object"==typeof o&&(o=g(o.params)),o=o?this.query?this.query+"&"+o:"?"+o:this.query,this[e]?this.makeRequest(t,this[n]+o,"get",null,i):r.reject("Missing "+e)}},j=function(t){var e=t+"Id",n=t+"Url";return function(r,o){var i=this[e]?"put":"post",s=this[e]?this[n]:this[t+"sUrl"];return l={},this.makeRequest(t,s+this.query,i,r,o)}},x=function(t){var e=t+"Id",n=t+"Url";return function(o){return this[e]||r.reject("Nothing to delete"),l={},this.makeRequest(t,this[n],"delete",null,o)}},_=function(t){var e=t+"Url";return function(n,r){return n=n||"",n&&"object"==typeof n&&(n="?"+g(n.params)),this.makeRequest(t,this[e]+n,"get",null,r)}};w.prototype.makeRequest=function(t,e,n,r,o){var i=this;n=(n||"GET").toUpperCase(),o&&"object"==typeof o||(o={});var s={formio:i,type:t,url:e,method:n,data:r,opts:o},a=d("preRequest",s).then(function(){return y("request",s).then(function(t){return null===t||void 0===t?w.request(e,n,r):t})});return v("wrapRequestPromise",a,s)},w.prototype.loadProject=b("project"),w.prototype.saveProject=j("project"),w.prototype.deleteProject=x("project"),w.prototype.loadForm=b("form"),w.prototype.saveForm=j("form"),w.prototype.deleteForm=x("form"),w.prototype.loadForms=_("forms"),w.prototype.loadSubmission=b("submission"),w.prototype.saveSubmission=j("submission"),w.prototype.deleteSubmission=x("submission"),w.prototype.loadSubmissions=_("submissions"),w.prototype.loadAction=b("action"),w.prototype.saveAction=j("action"),w.prototype.deleteAction=x("action"),w.prototype.loadActions=_("actions"),w.prototype.availableActions=function(){return this.makeRequest("availableActions",this.formUrl+"/actions")},w.prototype.actionInfo=function(t){return this.makeRequest("actionInfo",this.formUrl+"/actions/"+t)},w.prototype.uploadFile=function(t,e,n,r,o){var i={provider:t,method:"upload",file:e,fileName:n,dir:r},a=d("preRequest",i).then(function(){return y("fileRequest",i).then(function(i){if(null===i||void 0===i){if(s.storage.hasOwnProperty(t)){var a=new s.storage[t](this);return a.uploadFile(e,n,r,o)}throw"Storage provider not found"}return i}.bind(this))}.bind(this));return v("wrapFileRequestPromise",a,i)},w.prototype.downloadFile=function(t){var e={method:"download",file:t},n=d("preRequest",e).then(function(){return y("fileRequest",e).then(function(e){if(null===e||void 0===e){if(s.storage.hasOwnProperty(t.storage)){var n=new s.storage[t.storage](this);return n.downloadFile(t)}throw"Storage provider not found"}return e}.bind(this))}.bind(this));return v("wrapFileRequestPromise",n,e)},w.makeStaticRequest=function(t,e,n){e=(e||"GET").toUpperCase();var r={url:t,method:e,data:n},o=d("preRequest",r).then(function(){return y("staticRequest",r).then(function(r){return null===r||void 0===r?w.request(t,e,n):r})});return v("wrapStaticRequestPromise",o,r)},w.loadProjects=function(t){return t=t||"","object"==typeof t&&(t="?"+g(t.params)),this.makeStaticRequest(a+"/project"+t)},w.request=function(t,e,n){if(!t)return r.reject("No url provided");e=(e||"GET").toUpperCase();var o=btoa(t);return r.resolve().then(function(){return"GET"===e&&l.hasOwnProperty(o)?l[o]:r.resolve().then(function(){var r=new Headers({Accept:"application/json","Content-type":"application/json; charset=UTF-8"}),o=w.getToken();o&&r.append("x-jwt-token",o);var i={method:e,headers:r,mode:"cors"};return n&&(i.body=JSON.stringify(n)),fetch(t,i)})["catch"](function(t){throw t.message="Could not connect to API server ("+t.message+")",t.networkError=!0,t}).then(function(t){if(t.ok){var e=t.headers.get("x-jwt-token");return t.status>=200&&t.status<300&&e&&""!==e&&w.setToken(e),204===t.status?{}:(-1!==t.headers.get("content-type").indexOf("application/json")?t.json():t.text()).then(function(e){var n=t.headers.get("content-range");if(n&&"object"==typeof e){if(n=n.split("/"),"*"!==n[0]){var r=n[0].split("-");e.skip=Number(r[0]),e.limit=r[1]-r[0]+1}e.serverCount="*"===n[1]?n[1]:Number(n[1])}return e})}return 440===t.status?(w.setToken(null),w.events.emit("formio.sessionExpired",t.body)):401===t.status&&w.events.emit("formio.unauthorized",t.body),(-1!==t.headers.get("content-type").indexOf("application/json")?t.json():t.text()).then(function(t){throw t})})["catch"](function(t){throw"Bad Token"===t&&(w.setToken(null),w.events.emit("formio.badToken",t)),delete l[o],t})}).then(function(t){if("GET"===e&&(l[o]=r.resolve(t)),Array.isArray(t)){var n=t.map(i);return n.skip=t.skip,n.limit=t.limit,n.serverCount=t.serverCount,n}return i(t)})},w.setToken=function(t){if(t=t||"",t!==this.token){if(this.token=t,!t){w.setUser(null);try{return localStorage.removeItem("formioToken")}catch(e){return}}try{localStorage.setItem("formioToken",t)}catch(e){}w.currentUser()}},w.getToken=function(){if(this.token)return this.token;var t=localStorage.getItem("formioToken")||"";return this.token=t,t},w.setUser=function(t){if(!t){this.setToken(null);try{return localStorage.removeItem("formioUser")}catch(e){return}}try{localStorage.setItem("formioUser",JSON.stringify(t))}catch(e){}},w.getUser=function(){return JSON.parse(localStorage.getItem("formioUser")||null)},w.setBaseUrl=function(t){a=t,c||(u=t)},w.getBaseUrl=function(){return a},w.setAppUrl=function(t){u=t,c=!0},w.getAppUrl=function(){return u},w.clearCache=function(){l={}},w.currentUser=function(){var t=a+"/current",e=this.getUser();if(e)return v("wrapStaticRequestPromise",r.resolve(e),{url:t,method:"GET"});var n=this.getToken();return n?this.makeStaticRequest(t).then(function(t){return w.setUser(t),t}):v("wrapStaticRequestPromise",r.resolve(null),{url:t,method:"GET"})},w.logout=function(){var t=function(t){return this.setToken(null),this.setUser(null),w.clearCache(),t}.bind(this);return this.makeStaticRequest(a+"/logout").then(t)["catch"](t)},w.fieldData=function(t,e){if(!t)return"";if(!e||!e.key)return t;if(-1!==e.key.indexOf(".")){for(var n=t,r=e.key.split("."),o="",i=0;i<r.length;i++){if(o=r[i],n.hasOwnProperty("_id")&&(n=n.data),!n.hasOwnProperty(o))return;o===r[r.length-1]&&e.multiple&&!Array.isArray(n[o])&&(n[o]=[n[o]]),n=n[o]}return n}return e.multiple&&!Array.isArray(t[e.key])&&(t[e.key]=[t[e.key]]),t[e.key]},w.providers=s,w.events=new o({wildcard:!1,maxListeners:0}),w.registerPlugin=function(t,e){f.push(t),f.sort(function(t,e){return(e.priority||0)-(t.priority||0)}),t.__name=e,(t.init||p).call(t,w)},w.getPlugin=function(t){return f.reduce(function(e,n){return e?e:n.__name===t?n:void 0},null)},w.deregisterPlugin=function(t){var e=f.length;return f=f.filter(function(e){return e!==t&&e.__name!==t?!0:((e.deregister||p).call(e,w),!1)}),e!==f.length},e.exports=w},{"./providers":6,eventemitter3:1,"native-promise-only":2,"shallow-copy":3,"whatwg-fetch":4}],6:[function(t,e,n){e.exports={storage:t("./storage")}},{"./storage":8}],7:[function(t,e,n){var r=t("native-promise-only"),o=function(t){return{uploadFile:function(e,n,o,i){return new r(function(r,s){var a=new XMLHttpRequest;"function"==typeof i&&(a.upload.onprogress=i);var u=new FormData;u.append("name",n),u.append("dir",o),u.append("file",e),a.onerror=function(t){t.networkError=!0,s(t)},a.onload=function(){if(a.status>=200&&a.status<300){var t=JSON.parse(a.response);t.storage="dropbox",t.size=e.size,t.type=e.type,t.url=t.path_lower,r(t)}else s(a.response||"Unable to upload file")},a.onabort=function(t){s(t)},a.open("POST",t.formUrl+"/storage/dropbox"),a.setRequestHeader("x-jwt-token",localStorage.getItem("formioToken")),a.send(u)})},downloadFile:function(e){return e.url=t.formUrl+"/storage/dropbox?path_lower="+e.path_lower+"&x-jwt-token="+localStorage.getItem("formioToken"),r.resolve(e)}}};o.title="Dropbox",o.name="dropbox",e.exports=o},{"native-promise-only":2}],8:[function(t,e,n){e.exports={dropbox:t("./dropbox.js"),s3:t("./s3.js"),url:t("./url.js")}},{"./dropbox.js":7,"./s3.js":9,"./url.js":10}],9:[function(t,e,n){var r=t("native-promise-only"),o=function(t){return{uploadFile:function(e,n,o,i){return new r(function(r,s){var a=new XMLHttpRequest,u=new FormData;u.append("name",n),u.append("size",e.size),u.append("type",e.type),a.onerror=function(t){t.networkError=!0,s(t)},a.onabort=function(t){s(t)},a.onload=function(){if(a.status>=200&&a.status<300){var t=JSON.parse(a.response),u=new XMLHttpRequest;"function"==typeof i&&(u.upload.onprogress=i),t.data.fileName=n,t.data.key+=o+n;var c=new FormData;for(var f in t.data)c.append(f,t.data[f]);c.append("file",e),u.onerror=function(t){t.networkError=!0,s(t)},u.onload=function(){u.status>=200&&u.status<300?r({storage:"s3",name:n,bucket:t.bucket,key:t.data.key,url:t.url+t.data.key,acl:t.data.acl,size:e.size,type:e.type}):s(u.response||"Unable to upload file")},u.onabort=function(t){s(t)},u.open("POST",t.url),u.send(c)}else s(a.response||"Unable to sign file")},a.open("POST",t.formUrl+"/storage/s3"),a.setRequestHeader("Accept","application/json"),a.setRequestHeader("Content-Type","application/json; charset=UTF-8"),a.setRequestHeader("x-jwt-token",localStorage.getItem("formioToken")),a.send(JSON.stringify({name:n,size:e.size,type:e.type}))})},downloadFile:function(e){return"public-read"!==e.acl?t.makeRequest("file",t.formUrl+"/storage/s3?bucket="+e.bucket+"&key="+e.key,"GET"):r.resolve(e)}}};o.title="S3",o.name="s3",e.exports=o},{"native-promise-only":2}],10:[function(t,e,n){var r=t("native-promise-only"),o=function(t){return{title:"Url",name:"url",uploadFile:function(t,e,n,o){return new r(function(r,i){var s={dir:n,name:e,file:t},a=new XMLHttpRequest;"function"==typeof o&&(a.upload.onprogress=o),fd=new FormData;for(var u in s)fd.append(u,s[u]);a.onload=function(){a.status>=200&&a.status<300?r({storage:"url",name:e,url:a.response.url,size:t.size,type:t.type}):i(a.response||"Unable to upload file")},a.onerror=function(){i(a)},a.onabort=function(){i(a)},a.open("POST",response.url),a.send(fd)})},downloadFile:function(t){return r.resolve(t)}}};o.name="url",o.title="Url",e.exports=o},{"native-promise-only":2}]},{},[5])(5)});